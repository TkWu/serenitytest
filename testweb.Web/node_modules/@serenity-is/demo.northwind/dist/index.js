var it=Object.defineProperty;var bt=Object.getOwnPropertyDescriptor;var r=(s,n)=>it(s,"name",{value:n,configurable:!0});var p=(s,n,e,t)=>{for(var o=t>1?void 0:t?bt(n,e):n,i=s.length-1,a;i>=0;i--)(a=s[i])&&(o=(t?a(n,e,o):a(o))||o);return t&&o&&it(n,e,o),o};var D=(s,n,e)=>new Promise((t,o)=>{var i=v=>{try{d(e.next(v))}catch(G){o(G)}},a=v=>{try{d(e.throw(v))}catch(G){o(G)}},d=v=>v.done?t(v.value):Promise.resolve(v.value).then(i,a);d((e=e.apply(s,n)).next())});import{Decorators as zo,EntityDialog as _o}from"@serenity-is/corelib";var ge=class{};r(ge,"CategoryColumns"),ge.columnsKey="Northwind.Category";import{StringEditor as It,PrefixedContext as Lt}from"@serenity-is/corelib";import{initFormType as wt}from"@serenity-is/corelib/q";var ke=class extends Lt{constructor(n){if(super(n),!ke.init){ke.init=!0;var e=It;wt(ke,["CategoryName",e,"Description",e])}}},A=ke;r(A,"CategoryForm"),A.formKey="Northwind.Category";import{fieldsProxy as Et}from"@serenity-is/corelib/q";var N=class{};r(N,"CategoryLangRow"),N.idProperty="Id",N.nameProperty="CategoryName",N.localTextPrefix="Northwind.CategoryLang",N.deletePermission="Northwind:General",N.insertPermission="Northwind:General",N.readPermission="Northwind:General",N.updatePermission="Northwind:General",N.Fields=Et();import{serviceRequest as Tt}from"@serenity-is/corelib/q";var nt;(e=>(e.baseUrl="Serenity.Demo.Northwind/CategoryLang",e.Methods={Create:"Serenity.Demo.Northwind/CategoryLang/Create",Update:"Serenity.Demo.Northwind/CategoryLang/Update",Delete:"Serenity.Demo.Northwind/CategoryLang/Delete",Retrieve:"Serenity.Demo.Northwind/CategoryLang/Retrieve",List:"Serenity.Demo.Northwind/CategoryLang/List"},["Create","Update","Delete","Retrieve","List"].forEach(t=>{e[t]=function(o,i,a){return Tt(e.baseUrl+"/"+t,o,i,a)}})))(nt||(nt={}));import{getLookup as qt,getLookupAsync as Ot,fieldsProxy as kt}from"@serenity-is/corelib/q";var l=class{static getLookup(){return qt("Northwind.Category")}static getLookupAsync(){return D(this,null,function*(){return Ot("Northwind.Category")})}};r(l,"CategoryRow"),l.idProperty="CategoryID",l.nameProperty="CategoryName",l.localTextPrefix="Northwind.Category",l.lookupKey="Northwind.Category",l.deletePermission="Northwind:General",l.insertPermission="Northwind:General",l.readPermission="Northwind:General",l.updatePermission="Northwind:General",l.Fields=kt();import{serviceRequest as Ut}from"@serenity-is/corelib/q";var he;(e=>(e.baseUrl="Serenity.Demo.Northwind/Category",e.Methods={Create:"Serenity.Demo.Northwind/Category/Create",Update:"Serenity.Demo.Northwind/Category/Update",Delete:"Serenity.Demo.Northwind/Category/Delete",Retrieve:"Serenity.Demo.Northwind/Category/Retrieve",List:"Serenity.Demo.Northwind/Category/List"},["Create","Update","Delete","Retrieve","List"].forEach(t=>{e[t]=function(o,i,a){return Ut(e.baseUrl+"/"+t,o,i,a)}})))(he||(he={}));import{Decorators as Ft}from"@serenity-is/corelib";var xe=class{format(n){var e=n.value;if(!e||!e.length)return"";var t=P.getLookup().itemById;let o;return e.map(i=>(o=t[i])?o.FullName:i).join(", ")}};r(xe,"EmployeeListFormatter"),xe=p([Ft.registerFormatter("Serenity.Demo.Northwind.EmployeeListFormatter")],xe);var ve=class{};r(ve,"CustomerColumns"),ve.columnsKey="Northwind.Customer";import{fieldsProxy as Qt}from"@serenity-is/corelib/q";var C=class{};r(C,"CustomerCustomerDemoRow"),C.idProperty="ID",C.nameProperty="CustomerID",C.localTextPrefix="Northwind.CustomerCustomerDemo",C.deletePermission="Northwind:General",C.insertPermission="Northwind:General",C.readPermission="Northwind:General",C.updatePermission="Northwind:General",C.Fields=Qt();import{fieldsProxy as Gt}from"@serenity-is/corelib/q";var b=class{};r(b,"CustomerDemographicRow"),b.idProperty="ID",b.nameProperty="CustomerTypeID",b.localTextPrefix="Northwind.CustomerDemographic",b.deletePermission="Northwind:General",b.insertPermission="Northwind:General",b.readPermission="Northwind:General",b.updatePermission="Northwind:General",b.Fields=Gt();import{fieldsProxy as Ht}from"@serenity-is/corelib/q";var I=class{};r(I,"CustomerDetailsRow"),I.idProperty="Id",I.nameProperty="Email",I.localTextPrefix="Northwind.CustomerDetails",I.deletePermission="Northwind:General",I.insertPermission="Northwind:General",I.readPermission="Northwind:General",I.updatePermission="Northwind:General",I.Fields=Ht();import{StringEditor as Zt,LookupEditor as er,DateEditor as tr,EmailAddressEditor as rr,BooleanEditor as or,PrefixedContext as ir}from"@serenity-is/corelib";import{Decorators as at,IGetEditValue as Xt,ISetEditValue as Bt,TemplatedWidget as At,Toolbar as Mt}from"@serenity-is/corelib";import{Authorization as $t,coalesce as Wt,confirm as jt,formatDate as zt,formatISODateTimeUTC as _t,insert as Yt,trimToNull as dt}from"@serenity-is/corelib/q";import{Decorators as Jt,HtmlNoteContentEditor as Kt,TemplatedDialog as Vt}from"@serenity-is/corelib";import{text as st}from"@serenity-is/corelib/q";var H=class extends Vt{constructor(){super();this.textEditor=new Kt(this.byId("Text"))}getTemplate(){return"<form id='~_Form' class='s-Form'><textarea id='~_Text' class='required'></textarea></form>"}getDialogButtons(){return[{text:st("Dialogs.OkButton"),click:()=>{!this.validateForm()||this.okClick&&this.okClick()}},{text:st("Dialogs.CancelButton"),click:()=>this.dialogClose()}]}get text(){return this.textEditor.value}set text(e){this.textEditor.value=e}};r(H,"NoteDialog"),H=p([Jt.registerClass("Serenity.Demo.Northwind.NoteDialog")],H);var M=class extends At{constructor(e){super(e);new Mt(this.byId("Toolbar"),{buttons:[{title:"Add Note",cssClass:"add-button",onClick:t=>{t.preventDefault(),this.addClick()}}]})}getTemplate(){return"<div><div id='~_Toolbar'></div><ul id='~_NoteList'></ul></div>"}updateContent(){var e=this.byId("NoteList");if(e.children().remove(),this.items)for(var t=0,o=0;o<this.items.length;o++){var i=this.items[o],a=$("<li/>");$("<div/>").addClass("note-text").html(Wt(i.Text,"")).appendTo(a),$("<a/>").attr("href","#").addClass("note-date").text(i.InsertUserDisplayName+" - "+zt(i.InsertDate,"g")).data("index",t).appendTo(a).click(d=>this.editClick(d)),$("<a/>").attr("href","#").addClass("note-delete").attr("title","delete note").data("index",t).appendTo(a).click(d=>this.deleteClick(d)),a.appendTo(e),t++}}addClick(){var e=new H;e.dialogTitle="Add Note",e.okClick=()=>{var t=dt(e.text);t!=null&&(this.items=this.items||[],Yt(this.items,0,{Text:t,InsertUserDisplayName:$t.userDefinition.DisplayName,InsertDate:_t(new Date)}),this.updateContent(),e.dialogClose(),this.set_isDirty(!0),this.onChange&&this.onChange())},e.dialogOpen()}editClick(e){e.preventDefault();var t=$(e.target).data("index"),o=this.items[t],i=new H;i.dialogTitle="Edit Note",i.text=o.Text,i.okClick=()=>{var a=dt(i.text);!a||(this.items[t].Text=a,this.updateContent(),i.dialogClose(),this.set_isDirty(!0),this.onChange&&this.onChange())},i.dialogOpen()}deleteClick(e){e.preventDefault();var t=$(e.target).data("index");jt("Delete this note?",()=>{this.items.splice(t,1),this.updateContent(),this.set_isDirty(!0),this.onChange&&this.onChange()})}get value(){return this.items}set value(e){this.items=e||[],this.set_isDirty(!1),this.updateContent()}getEditValue(e,t){t[e.name]=this.value}setEditValue(e,t){this.value=e[t.name]||[]}get_isDirty(){return this.isDirty}set_isDirty(e){this.isDirty=e}};r(M,"NotesEditor"),M=p([at.registerEditor("Serenity.Demo.Northwind.NotesEditor",[Xt,Bt]),at.element("<div/>")],M);import{initFormType as nr}from"@serenity-is/corelib/q";var Ue=class extends ir{constructor(n){if(super(n),!Ue.init){Ue.init=!0;var e=Zt,t=er,o=M,i=tr,a=rr,d=or;nr(Ue,["CustomerID",e,"CompanyName",e,"ContactName",e,"ContactTitle",e,"Representatives",t,"Address",e,"Country",t,"City",t,"Region",e,"PostalCode",e,"Phone",e,"Fax",e,"NoteList",o,"LastContactDate",i,"LastContactedBy",t,"Email",a,"SendBulletin",d])}}},W=Ue;r(W,"CustomerForm"),W.formKey="Northwind.Customer";import{fieldsProxy as sr}from"@serenity-is/corelib/q";var T=class{};r(T,"CustomerGrossSalesRow"),T.nameProperty="ContactName",T.localTextPrefix="Northwind.CustomerGrossSales",T.deletePermission="Northwind:General",T.insertPermission="Northwind:General",T.readPermission="Northwind:General",T.updatePermission="Northwind:General",T.Fields=sr();import{fieldsProxy as ar}from"@serenity-is/corelib/q";var q=class{};r(q,"CustomerRepresentativesRow"),q.idProperty="RepresentativeId",q.localTextPrefix="Northwind.CustomerRepresentatives",q.deletePermission="Northwind:Customer:View",q.insertPermission="Northwind:Customer:View",q.readPermission="Northwind:Customer:View",q.updatePermission="Northwind:Customer:View",q.Fields=ar();import{getLookup as dr,getLookupAsync as pr,fieldsProxy as cr}from"@serenity-is/corelib/q";var y=class{static getLookup(){return dr("Northwind.Customer")}static getLookupAsync(){return D(this,null,function*(){return pr("Northwind.Customer")})}};r(y,"CustomerRow"),y.idProperty="ID",y.nameProperty="CompanyName",y.localTextPrefix="Northwind.Customer",y.lookupKey="Northwind.Customer",y.deletePermission="Northwind:Customer:Delete",y.insertPermission="Northwind:Customer:Modify",y.readPermission="Northwind:Customer:View",y.updatePermission="Northwind:Customer:Modify",y.Fields=cr();import{serviceRequest as lr}from"@serenity-is/corelib/q";var De;(e=>(e.baseUrl="Serenity.Demo.Northwind/Customer",e.Methods={Create:"Serenity.Demo.Northwind/Customer/Create",Update:"Serenity.Demo.Northwind/Customer/Update",Delete:"Serenity.Demo.Northwind/Customer/Delete",GetNextNumber:"Serenity.Demo.Northwind/Customer/GetNextNumber",Retrieve:"Serenity.Demo.Northwind/Customer/Retrieve",List:"Serenity.Demo.Northwind/Customer/List"},["Create","Update","Delete","GetNextNumber","Retrieve","List"].forEach(t=>{e[t]=function(o,i,a){return lr(e.baseUrl+"/"+t,o,i,a)}})))(De||(De={}));import{getLookup as ur,getLookupAsync as mr,fieldsProxy as yr}from"@serenity-is/corelib/q";var P=class{static getLookup(){return ur("Northwind.Employee")}static getLookupAsync(){return D(this,null,function*(){return mr("Northwind.Employee")})}};r(P,"EmployeeRow"),P.idProperty="EmployeeID",P.nameProperty="FullName",P.localTextPrefix="Northwind.Employee",P.lookupKey="Northwind.Employee",P.deletePermission="Northwind:General",P.insertPermission="Northwind:General",P.readPermission="Northwind:General",P.updatePermission="Northwind:General",P.Fields=yr();import{fieldsProxy as fr}from"@serenity-is/corelib/q";var L=class{};r(L,"EmployeeTerritoryRow"),L.idProperty="EmployeeID",L.nameProperty="TerritoryID",L.localTextPrefix="Northwind.EmployeeTerritory",L.deletePermission="Northwind:General",L.insertPermission="Northwind:General",L.readPermission="Northwind:General",L.updatePermission="Northwind:General",L.Fields=fr();import{Decorators as gr}from"@serenity-is/corelib";var et=(e=>(e[e.Male=1]="Male",e[e.Female=2]="Female",e))(et||{});gr.registerEnumType(et,"Serenity.Demo.Northwind.Gender");import{fieldsProxy as hr}from"@serenity-is/corelib/q";var w=class{};r(w,"NoteRow"),w.idProperty="NoteId",w.nameProperty="EntityType",w.localTextPrefix="Northwind.Note",w.deletePermission="Northwind:General",w.insertPermission="Northwind:General",w.readPermission="Northwind:General",w.updatePermission="Northwind:General",w.Fields=hr();import{Decorators as pt,IInitializeColumn as xr,ISlickFormatter as vr}from"@serenity-is/corelib";import{htmlEncode as Dr,isTrimmedEmpty as Sr}from"@serenity-is/corelib/q";var j=class{format(n){var e=Dr(n.value);if(!this.genderProperty||Sr(n.value))return e;var t=n.item[this.genderProperty];return'<i class="fa fa-'+(t===2?"female text-danger":"male text-primary")+' text-opacity-75"></i>'+e}initializeColumn(n){n.referencedFields=n.referencedFields||[],this.genderProperty&&n.referencedFields.push(this.genderProperty)}};r(j,"EmployeeFormatter"),p([pt.option()],j.prototype,"genderProperty",2),j=p([pt.registerFormatter("Serenity.Demo.Northwind.EmployeeFormatter",[vr,xr])],j);import{Decorators as Pr}from"@serenity-is/corelib";var tt=(e=>(e[e.NotShipped=0]="NotShipped",e[e.Shipped=1]="Shipped",e))(tt||{});Pr.registerEnumType(tt,"Serenity.Demo.Northwind.OrderShippingState","Northwind.OrderShippingState");import{Decorators as Rr}from"@serenity-is/corelib";import{htmlEncode as ct}from"@serenity-is/corelib/q";var Se=class{format(n){return n.value?'<i class="text-info fa fa-'+(n.value=="Speedy Express"?"plane":n.value=="Federal Shipping"?"ship":"truck")+' text-opacity-75"></i> '+ct(n.value):ct(n.value)}};r(Se,"ShipperFormatter"),Se=p([Rr.registerFormatter("Serenity.Demo.Northwind.ShipperFormatter")],Se);import{Decorators as Nr}from"@serenity-is/corelib";import{htmlEncode as Cr}from"@serenity-is/corelib/q";var Pe=class{format(n){return n.value==null?"":Cr(n.value)+' <i class="icon fa fa-balance-scale text-secondary text-opacity-75"></i>'}};r(Pe,"FreightFormatter"),Pe=p([Nr.registerFormatter("Serenity.Demo.Northwind.FreightFormatter")],Pe);var Re=class{};r(Re,"OrderColumns"),Re.columnsKey="Northwind.Order";var Ne=class{};r(Ne,"OrderDetailColumns"),Ne.columnsKey="Northwind.OrderDetail";import{LookupEditor as br,DecimalEditor as Ir,IntegerEditor as Lr,PrefixedContext as wr}from"@serenity-is/corelib";import{initFormType as Er}from"@serenity-is/corelib/q";var Fe=class extends wr{constructor(n){if(super(n),!Fe.init){Fe.init=!0;var e=br,t=Ir,o=Lr;Er(Fe,["ProductID",e,"UnitPrice",t,"Quantity",o,"Discount",t])}}},z=Fe;r(z,"OrderDetailForm"),z.formKey="Northwind.OrderDetail";import{fieldsProxy as Tr}from"@serenity-is/corelib/q";var R=class{};r(R,"OrderDetailRow"),R.idProperty="DetailID",R.localTextPrefix="Northwind.OrderDetail",R.deletePermission="Northwind:General",R.insertPermission="Northwind:General",R.readPermission="Northwind:General",R.updatePermission="Northwind:General",R.Fields=Tr();import{serviceRequest as qr}from"@serenity-is/corelib/q";var lt;(e=>(e.baseUrl="Serenity.Demo.Northwind/OrderDetail",e.Methods={Retrieve:"Serenity.Demo.Northwind/OrderDetail/Retrieve",List:"Serenity.Demo.Northwind/OrderDetail/List"},["Retrieve","List"].forEach(t=>{e[t]=function(o,i,a){return qr(e.baseUrl+"/"+t,o,i,a)}})))(lt||(lt={}));import{Decorators as Or,LookupEditorBase as kr}from"@serenity-is/corelib";var _=class extends kr{constructor(n,e){super(n,e)}getLookupKey(){return"Northwind.Customer"}getItemText(n,e){return super.getItemText(n,e)+" ["+n.CustomerID+"]"}};r(_,"CustomerEditor"),_=p([Or.registerEditor("Serenity.Demo.Northwind.CustomerEditor")],_);import{DateEditor as Xr,LookupEditor as Br,DecimalEditor as Ar,StringEditor as Mr,PrefixedContext as $r}from"@serenity-is/corelib";import{Decorators as Gr}from"@serenity-is/corelib";import{alert as Hr,toId as Jr,tryFirst as Kr}from"@serenity-is/corelib/q";import{GridEditorBase as Vr}from"@serenity-is/extensions";import{Decorators as Ur}from"@serenity-is/corelib";import{toId as Fr}from"@serenity-is/corelib/q";import{GridEditorDialog as Qr}from"@serenity-is/extensions";var Y=class extends Qr{constructor(){super();this.form=new z(this.idPrefix),this.form.ProductID.changeSelect2(e=>{var t=Fr(this.form.ProductID.value);t!=null&&(this.form.UnitPrice.value=c.getLookup().itemById[t].UnitPrice)}),this.form.Discount.addValidationRule(this.uniqueName,e=>{var t=this.form.UnitPrice.value,o=this.form.Quantity.value,i=this.form.Discount.value;if(t!=null&&o!=null&&i!=null&&i>0&&i>=t*o)return"Discount can't be higher than total price!"})}getFormKey(){return z.formKey}getLocalTextPrefix(){return R.localTextPrefix}};r(Y,"OrderDetailDialog"),Y=p([Ur.registerClass()],Y);var Z=class extends Vr{getColumnsKey(){return Ne.columnsKey}getDialogType(){return Y}getLocalTextPrefix(){return R.localTextPrefix}constructor(n){super(n)}validateEntity(n,e){n.ProductID=Jr(n.ProductID);var t=Kr(this.view.getItems(),o=>o.ProductID===n.ProductID);return t&&this.id(t)!==e?(Hr("This product is already in order details!"),!1):(n.ProductName=c.getLookup().itemById[n.ProductID].ProductName,n.LineTotal=(n.Quantity||0)*(n.UnitPrice||0)-(n.Discount||0),!0)}};r(Z,"OrderDetailsEditor"),Z=p([Gr.registerEditor("Serenity.Demo.Northwind.OrderDetailsEditor")],Z);import{initFormType as Wr}from"@serenity-is/corelib/q";var Qe=class extends $r{constructor(n){if(super(n),!Qe.init){Qe.init=!0;var e=_,t=Xr,o=Br,i=Z,a=Ar,d=Mr;Wr(Qe,["CustomerID",e,"OrderDate",t,"RequiredDate",t,"EmployeeID",o,"DetailList",i,"ShippedDate",t,"ShipVia",o,"Freight",a,"ShipName",d,"ShipAddress",d,"ShipCity",d,"ShipRegion",d,"ShipPostalCode",d,"ShipCountry",d])}}},ee=Qe;r(ee,"OrderForm"),ee.formKey="Northwind.Order";import{fieldsProxy as jr}from"@serenity-is/corelib/q";var u=class{};r(u,"OrderRow"),u.idProperty="OrderID",u.nameProperty="CustomerID",u.localTextPrefix="Northwind.Order",u.deletePermission="Northwind:General",u.insertPermission="Northwind:General",u.readPermission="Northwind:General",u.updatePermission="Northwind:General",u.Fields=jr();import{serviceRequest as zr}from"@serenity-is/corelib/q";var te;(e=>(e.baseUrl="Serenity.Demo.Northwind/Order",e.Methods={Create:"Serenity.Demo.Northwind/Order/Create",Update:"Serenity.Demo.Northwind/Order/Update",Delete:"Serenity.Demo.Northwind/Order/Delete",Retrieve:"Serenity.Demo.Northwind/Order/Retrieve",List:"Serenity.Demo.Northwind/Order/List"},["Create","Update","Delete","Retrieve","List"].forEach(t=>{e[t]=function(o,i,a){return zr(e.baseUrl+"/"+t,o,i,a)}})))(te||(te={}));var ut;(e=>{e.General="Northwind:General";let n;(a=>(a.Delete="Northwind:Customer:Delete",a.Modify="Northwind:Customer:Modify",a.View="Northwind:Customer:View"))(n=e.Customer||(e.Customer={}))})(ut||(ut={}));var Ce=class{};r(Ce,"ProductColumns"),Ce.columnsKey="Northwind.Product";import{StringEditor as Zr,ImageUploadEditor as eo,BooleanEditor as to,LookupEditor as ro,DecimalEditor as oo,IntegerEditor as io,PrefixedContext as no}from"@serenity-is/corelib";import{Decorators as _r,EntityDialog as Yr}from"@serenity-is/corelib";var J=class extends Yr{constructor(){super(...arguments);this.form=new re(this.idPrefix)}getFormKey(){return re.formKey}getIdProperty(){return m.idProperty}getLocalTextPrefix(){return m.localTextPrefix}getNameProperty(){return m.nameProperty}getService(){return be.baseUrl}};r(J,"SupplierDialog"),J=p([_r.registerClass("Serenity.Demo.Northwind.SupplierDialog")],J);import{initFormType as so}from"@serenity-is/corelib/q";var Ge=class extends no{constructor(n){if(super(n),!Ge.init){Ge.init=!0;var e=Zr,t=eo,o=to,i=ro,a=oo,d=io;so(Ge,["ProductName",e,"ProductImage",t,"Discontinued",o,"SupplierID",i,"CategoryID",i,"QuantityPerUnit",e,"UnitPrice",a,"UnitsInStock",d,"UnitsOnOrder",d,"ReorderLevel",d])}}},oe=Ge;r(oe,"ProductForm"),oe.formKey="Northwind.Product";import{fieldsProxy as ao}from"@serenity-is/corelib/q";var E=class{};r(E,"ProductLangRow"),E.idProperty="Id",E.nameProperty="ProductName",E.localTextPrefix="Northwind.ProductLang",E.deletePermission="Northwind:General",E.insertPermission="Northwind:General",E.readPermission="Northwind:General",E.updatePermission="Northwind:General",E.Fields=ao();import{serviceRequest as po}from"@serenity-is/corelib/q";var mt;(e=>(e.baseUrl="Serenity.Demo.Northwind/ProductLang",e.Methods={Create:"Serenity.Demo.Northwind/ProductLang/Create",Update:"Serenity.Demo.Northwind/ProductLang/Update",Delete:"Serenity.Demo.Northwind/ProductLang/Delete",Retrieve:"Serenity.Demo.Northwind/ProductLang/Retrieve",List:"Serenity.Demo.Northwind/ProductLang/List"},["Create","Update","Delete","Retrieve","List"].forEach(t=>{e[t]=function(o,i,a){return po(e.baseUrl+"/"+t,o,i,a)}})))(mt||(mt={}));import{fieldsProxy as co}from"@serenity-is/corelib/q";var O=class{};r(O,"ProductLogRow"),O.idProperty="ProductLogID",O.localTextPrefix="Northwind.ProductLog",O.deletePermission=null,O.insertPermission=null,O.readPermission="",O.updatePermission=null,O.Fields=co();import{getLookup as lo,getLookupAsync as uo,fieldsProxy as mo}from"@serenity-is/corelib/q";var c=class{static getLookup(){return lo("Northwind.Product")}static getLookupAsync(){return D(this,null,function*(){return uo("Northwind.Product")})}};r(c,"ProductRow"),c.idProperty="ProductID",c.nameProperty="ProductName",c.localTextPrefix="Northwind.Product",c.lookupKey="Northwind.Product",c.deletePermission="Northwind:General",c.insertPermission="Northwind:General",c.readPermission="Northwind:General",c.updatePermission="Northwind:General",c.Fields=mo();import{serviceRequest as yo}from"@serenity-is/corelib/q";var V;(e=>(e.baseUrl="Serenity.Demo.Northwind/Product",e.Methods={Create:"Serenity.Demo.Northwind/Product/Create",Update:"Serenity.Demo.Northwind/Product/Update",Delete:"Serenity.Demo.Northwind/Product/Delete",Retrieve:"Serenity.Demo.Northwind/Product/Retrieve",List:"Serenity.Demo.Northwind/Product/List"},["Create","Update","Delete","Retrieve","List"].forEach(t=>{e[t]=function(o,i,a){return yo(e.baseUrl+"/"+t,o,i,a)}})))(V||(V={}));var Ie=class{};r(Ie,"RegionColumns"),Ie.columnsKey="Northwind.Region";import{IntegerEditor as fo,StringEditor as go,PrefixedContext as ho}from"@serenity-is/corelib";import{initFormType as xo}from"@serenity-is/corelib/q";var He=class extends ho{constructor(n){if(super(n),!He.init){He.init=!0;var e=fo,t=go;xo(He,["RegionID",e,"RegionDescription",t])}}},ie=He;r(ie,"RegionForm"),ie.formKey="Northwind.Region";import{getLookup as vo,getLookupAsync as Do,fieldsProxy as So}from"@serenity-is/corelib/q";var f=class{static getLookup(){return vo("Northwind.Region")}static getLookupAsync(){return D(this,null,function*(){return Do("Northwind.Region")})}};r(f,"RegionRow"),f.idProperty="RegionID",f.nameProperty="RegionDescription",f.localTextPrefix="Northwind.Region",f.lookupKey="Northwind.Region",f.deletePermission="Northwind:General",f.insertPermission="Northwind:General",f.readPermission="Northwind:General",f.updatePermission="Northwind:General",f.Fields=So();import{serviceRequest as Po}from"@serenity-is/corelib/q";var Le;(e=>(e.baseUrl="Serenity.Demo.Northwind/Region",e.Methods={Create:"Serenity.Demo.Northwind/Region/Create",Update:"Serenity.Demo.Northwind/Region/Update",Delete:"Serenity.Demo.Northwind/Region/Delete",Retrieve:"Serenity.Demo.Northwind/Region/Retrieve",List:"Serenity.Demo.Northwind/Region/List"},["Create","Update","Delete","Retrieve","List"].forEach(t=>{e[t]=function(o,i,a){return Po(e.baseUrl+"/"+t,o,i,a)}})))(Le||(Le={}));var ze=class{};r(ze,"SalesByCategoryColumns"),ze.columnsKey="Northwind.SalesByCategory";import{fieldsProxy as Ro}from"@serenity-is/corelib/q";var k=class{};r(k,"SalesByCategoryRow"),k.nameProperty="CategoryName",k.localTextPrefix="Northwind.SalesByCategory",k.deletePermission="Northwind:General",k.insertPermission="Northwind:General",k.readPermission="Northwind:General",k.updatePermission="Northwind:General",k.Fields=Ro();import{serviceRequest as No}from"@serenity-is/corelib/q";var yt;(e=>(e.baseUrl="Serenity.Demo.Northwind/SalesByCategory",e.Methods={List:"Serenity.Demo.Northwind/SalesByCategory/List"},["List"].forEach(t=>{e[t]=function(o,i,a){return No(e.baseUrl+"/"+t,o,i,a)}})))(yt||(yt={}));var we=class{};r(we,"ShipperColumns"),we.columnsKey="Northwind.Shipper";import{StringEditor as Lo,PrefixedContext as wo}from"@serenity-is/corelib";import{Decorators as ft,StringEditor as Co,WX as bo}from"@serenity-is/corelib";import{isEmptyOrNull as gt,replaceAll as X,startsWith as _e,text as Io,trimToNull as rt}from"@serenity-is/corelib/q";var x=class extends Co{constructor(e){super(e);this.addValidationRule(this.uniqueName,t=>{var o=rt(this.get_value());return o==null?null:x.validate(o,this.multiple)}),e.bind("change",t=>{!bo.hasOriginalEvent(t)||this.formatValue()}),e.bind("blur",t=>{this.element.hasClass("valid")&&this.formatValue()})}formatValue(){this.element.val(this.getFormattedValue())}getFormattedValue(){var e=this.element.val();return this.multiple?x.formatMulti(e,x.formatPhone):x.formatPhone(e)}get_value(){return this.getFormattedValue()}set_value(e){this.element.val(e)}static validate(e,t){var o=t?x.isValidMulti(e,x.isValidPhone):x.isValidPhone(e);return o?null:Io(t?"Validation.NorthwindPhoneMultiple":"Validation.NorthwindPhone")}static isValidPhone(e){if(gt(e)||(e=X(X(e," ",""),"-",""),e.length<10)||(_e(e,"0")&&(e=e.substring(1)),_e(e,"(")&&e.charAt(4)===")"&&(e=e.substr(1,3)+e.substring(5)),e.length!==10)||_e(e,"0"))return!1;for(var t=0;t<e.length;t++){var o=e.charAt(t);if(o<"0"||o>"9")return!1}return!0}static formatPhone(e){return x.isValidPhone(e)&&(e=X(X(X(X(e," ",""),"-",""),"(",""),")",""),_e(e,"0")&&(e=e.substring(1)),e="("+e.substr(0,3)+") "+e.substr(3,3)+"-"+e.substr(6,2)+e.substr(8,2)),e}static formatMulti(e,t){var o=X(e,String.fromCharCode(59),String.fromCharCode(44)).split(String.fromCharCode(44)),i="";for(var a of o){var d=rt(a);d!=null&&(i.length>0&&(i+=", "),i+=t(d))}return i}static isValidMulti(e,t){if(gt(e))return!1;for(var o=X(e,String.fromCharCode(59),String.fromCharCode(44)).split(String.fromCharCode(44)),i=!1,a=0;a<o.length;a++){var d=o[a],v=rt(d);if(v!=null){if(!t(v))return!1;i=!0}}return!!i}};r(x,"PhoneEditor"),p([ft.option()],x.prototype,"multiple",2),x=p([ft.registerEditor("Serenity.Demo.Northwind.PhoneEditor")],x);import{initFormType as Eo}from"@serenity-is/corelib/q";var Je=class extends wo{constructor(n){if(super(n),!Je.init){Je.init=!0;var e=Lo,t=x;Eo(Je,["CompanyName",e,"Phone",t])}}},ne=Je;r(ne,"ShipperForm"),ne.formKey="Northwind.Shipper";import{getLookup as To,getLookupAsync as qo,fieldsProxy as Oo}from"@serenity-is/corelib/q";var g=class{static getLookup(){return To("Northwind.Shipper")}static getLookupAsync(){return D(this,null,function*(){return qo("Northwind.Shipper")})}};r(g,"ShipperRow"),g.idProperty="ShipperID",g.nameProperty="CompanyName",g.localTextPrefix="Northwind.Shipper",g.lookupKey="Northwind.Shipper",g.deletePermission="Northwind:General",g.insertPermission="Northwind:General",g.readPermission="Northwind:General",g.updatePermission="Northwind:General",g.Fields=Oo();import{serviceRequest as ko}from"@serenity-is/corelib/q";var Ee;(e=>(e.baseUrl="Serenity.Demo.Northwind/Shipper",e.Methods={Create:"Serenity.Demo.Northwind/Shipper/Create",Update:"Serenity.Demo.Northwind/Shipper/Update",Delete:"Serenity.Demo.Northwind/Shipper/Delete",Retrieve:"Serenity.Demo.Northwind/Shipper/Retrieve",List:"Serenity.Demo.Northwind/Shipper/List"},["Create","Update","Delete","Retrieve","List"].forEach(t=>{e[t]=function(o,i,a){return ko(e.baseUrl+"/"+t,o,i,a)}})))(Ee||(Ee={}));var Te=class{};r(Te,"SupplierColumns"),Te.columnsKey="Northwind.Supplier";import{StringEditor as Uo,PrefixedContext as Fo}from"@serenity-is/corelib";import{initFormType as Qo}from"@serenity-is/corelib/q";var Ke=class extends Fo{constructor(n){if(super(n),!Ke.init){Ke.init=!0;var e=Uo;Qo(Ke,["CompanyName",e,"ContactName",e,"ContactTitle",e,"Address",e,"Region",e,"PostalCode",e,"Country",e,"City",e,"Phone",e,"Fax",e,"HomePage",e])}}},re=Ke;r(re,"SupplierForm"),re.formKey="Northwind.Supplier";import{getLookup as Go,getLookupAsync as Ho,fieldsProxy as Jo}from"@serenity-is/corelib/q";var m=class{static getLookup(){return Go("Northwind.Supplier")}static getLookupAsync(){return D(this,null,function*(){return Ho("Northwind.Supplier")})}};r(m,"SupplierRow"),m.idProperty="SupplierID",m.nameProperty="CompanyName",m.localTextPrefix="Northwind.Supplier",m.lookupKey="Northwind.Supplier",m.deletePermission="Northwind:General",m.insertPermission="Northwind:General",m.readPermission="Northwind:General",m.updatePermission="Northwind:General",m.Fields=Jo();import{serviceRequest as Ko}from"@serenity-is/corelib/q";var be;(e=>(e.baseUrl="Serenity.Demo.Northwind/Supplier",e.Methods={Create:"Serenity.Demo.Northwind/Supplier/Create",Update:"Serenity.Demo.Northwind/Supplier/Update",Delete:"Serenity.Demo.Northwind/Supplier/Delete",Retrieve:"Serenity.Demo.Northwind/Supplier/Retrieve",List:"Serenity.Demo.Northwind/Supplier/List"},["Create","Update","Delete","Retrieve","List"].forEach(t=>{e[t]=function(o,i,a){return Ko(e.baseUrl+"/"+t,o,i,a)}})))(be||(be={}));var qe=class{};r(qe,"TerritoryColumns"),qe.columnsKey="Northwind.Territory";import{StringEditor as Vo,LookupEditor as Xo,PrefixedContext as Bo}from"@serenity-is/corelib";import{initFormType as Ao}from"@serenity-is/corelib/q";var Ve=class extends Bo{constructor(n){if(super(n),!Ve.init){Ve.init=!0;var e=Vo,t=Xo;Ao(Ve,["TerritoryID",e,"TerritoryDescription",e,"RegionID",t])}}},se=Ve;r(se,"TerritoryForm"),se.formKey="Northwind.Territory";import{getLookup as Mo,getLookupAsync as $o,fieldsProxy as Wo}from"@serenity-is/corelib/q";var h=class{static getLookup(){return Mo("Northwind.Territory")}static getLookupAsync(){return D(this,null,function*(){return $o("Northwind.Territory")})}};r(h,"TerritoryRow"),h.idProperty="ID",h.nameProperty="TerritoryID",h.localTextPrefix="Northwind.Territory",h.lookupKey="Northwind.Territory",h.deletePermission="Northwind:General",h.insertPermission="Northwind:General",h.readPermission="Northwind:General",h.updatePermission="Northwind:General",h.Fields=Wo();import{serviceRequest as jo}from"@serenity-is/corelib/q";var Oe;(e=>(e.baseUrl="Serenity.Demo.Northwind/Territory",e.Methods={Create:"Serenity.Demo.Northwind/Territory/Create",Update:"Serenity.Demo.Northwind/Territory/Update",Delete:"Serenity.Demo.Northwind/Territory/Delete",Retrieve:"Serenity.Demo.Northwind/Territory/Retrieve",List:"Serenity.Demo.Northwind/Territory/List"},["Create","Update","Delete","Retrieve","List"].forEach(t=>{e[t]=function(o,i,a){return jo(e.baseUrl+"/"+t,o,i,a)}})))(Oe||(Oe={}));var K=class extends _o{constructor(){super(...arguments);this.form=new A(this.idPrefix)}getFormKey(){return A.formKey}getIdProperty(){return l.idProperty}getLocalTextPrefix(){return l.localTextPrefix}getNameProperty(){return l.nameProperty}getService(){return he.baseUrl}};r(K,"CategoryDialog"),K=p([zo.registerClass("Serenity.Demo.Northwind.CategoryDialog")],K);import{Decorators as Yo,EntityGrid as Zo}from"@serenity-is/corelib";var Xe=class extends Zo{getColumnsKey(){return ge.columnsKey}getDialogType(){return K}getIdProperty(){return l.idProperty}getLocalTextPrefix(){return l.localTextPrefix}getService(){return he.baseUrl}};r(Xe,"CategoryGrid"),Xe=p([Yo.registerClass("Serenity.Demo.Northwind.CategoryGrid")],Xe);import{Decorators as vt,EntityDialog as fi,TabsExtensions as gi}from"@serenity-is/corelib";import{reloadLookup as hi,text as ot}from"@serenity-is/corelib/q";import{DialogUtils as xi}from"@serenity-is/extensions";import{Decorators as ui,SubDialogHelper as mi}from"@serenity-is/corelib";import{Decorators as xt,EntityGrid as ri,EnumEditor as oi,LookupEditor as ii}from"@serenity-is/corelib";import{toId as ni}from"@serenity-is/corelib/q";import{ExcelExportHelper as si,PdfExportHelper as ai,ReportHelper as di}from"@serenity-is/extensions";import{Decorators as ht,EntityDialog as ei}from"@serenity-is/corelib";import{ReportHelper as ti}from"@serenity-is/extensions";var Q=class extends ei{constructor(){super();this.form=new ee(this.idPrefix)}getFormKey(){return ee.formKey}getIdProperty(){return u.idProperty}getLocalTextPrefix(){return u.localTextPrefix}getNameProperty(){return u.nameProperty}getService(){return te.baseUrl}getToolbarButtons(){var e=super.getToolbarButtons();return e.push(ti.createToolButton({title:"Invoice",cssClass:"export-pdf-button",reportKey:"Northwind.OrderDetail",getParams:()=>({OrderID:this.get_entityId()})})),e}updateInterface(){super.updateInterface(),this.toolbar.findButton("export-pdf-button").toggle(this.isEditMode())}};r(Q,"OrderDialog"),Q=p([ht.registerClass("Serenity.Demo.Northwind.OrderDialog"),ht.panel()],Q);var pi=u.Fields,ae=class extends ri{constructor(e){super(e)}getColumnsKey(){return Re.columnsKey}getDialogType(){return Q}getIdProperty(){return u.idProperty}getLocalTextPrefix(){return u.localTextPrefix}getService(){return te.baseUrl}getQuickFilters(){var e=super.getQuickFilters();return e.push({type:ii,options:{lookupKey:c.lookupKey},field:"ProductID",title:"Contains Product in Details",handler:t=>{this.view.params.ProductID=ni(t.value)},cssClass:"hidden-xs"}),e}createQuickFilters(){super.createQuickFilters(),this.shippingStateFilter=this.findQuickFilter(oi,pi.ShippingState)}getButtons(){var e=super.getButtons();return e.push(si.createToolButton({grid:this,service:te.baseUrl+"/ListExcel",onViewSubmit:()=>this.onViewSubmit(),separator:!0})),e.push(ai.createToolButton({grid:this,onViewSubmit:()=>this.onViewSubmit()})),e}getColumns(){var e=super.getColumns();return e.splice(1,0,{id:"Print Invoice",field:null,name:"",cssClass:"align-center",format:t=>'<a class="inline-action print-invoice" title="invoice"><i class="fa fa-file-pdf-o text-red"></i></a>',width:36,minWidth:36,maxWidth:36}),e}onClick(e,t,o){if(super.onClick(e,t,o),!e.isDefaultPrevented()){var i=this.itemAt(t),a=$(e.target);a.parent().hasClass("inline-action")&&(a=a.parent()),a.hasClass("inline-action")&&(e.preventDefault(),a.hasClass("print-invoice")&&di.execute({reportKey:"Northwind.OrderDetail",params:{OrderID:i.OrderID}}))}}set_shippingState(e){this.shippingStateFilter.value=e==null?"":e.toString()}addButtonClick(){var e=this.view.params.EqualityFilter;this.editItem({CustomerID:e?e.CustomerID:null})}};r(ae,"OrderGrid"),ae=p([xt.registerClass("Serenity.Demo.Northwind.OrderGrid"),xt.filterable()],ae);import{Decorators as ci,EditorUtils as li}from"@serenity-is/corelib";var de=class extends Q{updateInterface(){super.updateInterface(),li.setReadOnly(this.form.CustomerID,!0)}};r(de,"CustomerOrderDialog"),de=p([ci.registerClass("Serenity.Demo.Northwind.CustomerOrderDialog")],de);var yi=u.Fields,pe=class extends ae{constructor(e){super(e)}getDialogType(){return de}getColumns(){return super.getColumns().filter(e=>e.field!==yi.CustomerCompanyName)}initEntityDialog(e,t){super.initEntityDialog(e,t),mi.cascade(t,this.element.closest(".ui-dialog"))}addButtonClick(){this.editItem({CustomerID:this.customerID})}getInitialTitle(){return null}getGridCanLoad(){return super.getGridCanLoad()&&!!this.customerID}get customerID(){return this._customerID}set customerID(e){this._customerID!==e&&(this._customerID=e,this.setEquality("CustomerID",e),this.refresh())}};r(pe,"CustomerOrdersGrid"),pe=p([ui.registerClass()],pe);var ce=class extends fi{constructor(){super();this.form=new W(this.idPrefix);this.ordersGrid=new pe(this.byId("OrdersGrid")),this.ordersGrid.openDialogsAsPanel=!1,this.byId("NoteList").closest(".field").hide().end().appendTo(this.byId("TabNotes")),xi.pendingChangesConfirmation(this.element,()=>this.getSaveState()!=this.loadedState)}getFormKey(){return W.formKey}getIdProperty(){return y.idProperty}getLocalTextPrefix(){return y.localTextPrefix}getNameProperty(){return y.nameProperty}getService(){return De.baseUrl}getSaveState(){try{return $.toJSON(this.getSaveEntity())}catch(e){return null}}loadResponse(e){super.loadResponse(e),this.loadedState=this.getSaveState()}loadEntity(e){super.loadEntity(e),gi.setDisabled(this.tabs,"Orders",this.isNewOrDeleted()),this.ordersGrid.customerID=e.CustomerID}onSaveSuccess(e){super.onSaveSuccess(e),hi("Northwind.Customer")}getTemplate(){return`<div id="~_Tabs" class="s-DialogContent">
    <ul>
        <li><a href="#~_TabInfo"><span>${ot("Db.Northwind.Customer.EntitySingular")}</span></a></li>
        <li><a href="#~_TabNotes"><span>${ot("Db.Northwind.Note.EntityPlural")}</span></a></li>
        <li><a href="#~_TabOrders"><span>${ot("Db.Northwind.Order.EntityPlural")}</span></a></li>
    </ul>
    <div id="~_TabInfo" class="tab-pane s-TabInfo">
        <div id="~_Toolbar" class="s-DialogToolbar">
        </div>
        <div class="s-Form">
            <form id="~_Form" action="">
                <div class="fieldset ui-widget ui-widget-content ui-corner-all">
                    <div id="~_PropertyGrid"></div>
                    <div class="clear"></div>
                </div>
            </form>
        </div>
    </div>
    <div id="~_TabNotes" class="tab-pane s-TabNotes">
    </div>
    <div id="~_TabOrders" class="tab-pane s-TabOrders">
        <div id="~_OrdersGrid">
        </div>
    </div>
</div>`}};r(ce,"CustomerDialog"),ce=p([vt.registerClass("Serenity.Demo.Northwind.CustomerDialog"),vt.panel()],ce);import{Decorators as Dt,EntityGrid as vi}from"@serenity-is/corelib";var Be=class extends vi{getColumnsKey(){return ve.columnsKey}getDialogType(){return ce}getIdProperty(){return y.idProperty}getLocalTextPrefix(){return y.localTextPrefix}getService(){return De.baseUrl}};r(Be,"CustomerGrid"),Be=p([Dt.registerClass("Serenity.Demo.Norhtwind.CustomerGrid"),Dt.filterable()],Be);import{Decorators as St,EntityDialog as Di}from"@serenity-is/corelib";var le=class extends Di{constructor(){super(...arguments);this.form=new oe(this.idPrefix)}getFormKey(){return oe.formKey}getIdProperty(){return c.idProperty}getLocalTextPrefix(){return c.localTextPrefix}getNameProperty(){return c.nameProperty}getService(){return V.baseUrl}};r(le,"ProductDialog"),le=p([St.registerClass(),St.maximizable()],le);import{Decorators as Pt,EntityGrid as Si,LookupEditor as Pi}from"@serenity-is/corelib";import{attrEncode as Rt,deepClone as Ri,first as ue,formatNumber as Ye,htmlEncode as Ze,notifyError as Nt,parseDecimal as Ni,parseInteger as Ci,parseQueryString as bi,serviceRequest as Ii,text as Ct,toId as Li,trimToNull as wi,tryFirst as Ei}from"@serenity-is/corelib/q";import{ExcelExportHelper as Ti,PdfExportHelper as qi}from"@serenity-is/extensions";var U=c.Fields,Ae=class extends Si{constructor(e){super(e);this.pendingChanges={};this.slickContainer.on("change",".edit:input",t=>this.inputsChange(t))}getColumnsKey(){return Ce.columnsKey}getDialogType(){return le}getIdProperty(){return c.idProperty}getLocalTextPrefix(){return c.localTextPrefix}getService(){return V.baseUrl}getButtons(){var e=super.getButtons();return e.push(Ti.createToolButton({grid:this,service:V.baseUrl+"/ListExcel",onViewSubmit:()=>this.onViewSubmit(),separator:!0})),e.push(qi.createToolButton({grid:this,onViewSubmit:()=>this.onViewSubmit(),reportTitle:"Product List",columnTitles:{Discontinued:"Dis."},tableOptions:{columnStyles:{ProductID:{cellWidth:25,halign:"right"},Discountinued:{cellWidth:25}}}})),e.push({title:"Save Changes",cssClass:"apply-changes-button disabled",onClick:t=>this.saveClick(),separator:!0}),e}onViewProcessData(e){return this.pendingChanges={},this.setSaveButtonState(),super.onViewProcessData(e)}numericInputFormatter(e){if(e.item.__nonDataRow)return Ze(Ye(e.value,"#0.##"));var t="edit numeric",o=e.item,i=this.pendingChanges[o.ProductID];i&&i[e.column.field]!==void 0&&(t+=" dirty");var a=this.getEffectiveValue(o,e.column.field);return"<input type='text' class='"+t+"' data-field='"+e.column.field+"' value='"+Ye(a,"0.##")+"'/>"}stringInputFormatter(e){if(e.item.__nonDataRow)return Ze(e.value);var t="edit string",o=e.item,i=this.pendingChanges[o.ProductID],a=e.column;i&&i[a.field]!==void 0&&(t+=" dirty");var d=this.getEffectiveValue(o,a.field);return"<input type='text' class='"+t+"' data-field='"+a.field+"' value='"+Rt(d)+"' maxlength='"+a.sourceItem.maxLength+"'/>"}selectFormatter(e,t,o){if(e.item.__nonDataRow)return Ze(e.value);var i="edit",a=e.item,d=this.pendingChanges[a.ProductID],v=e.column;d&&d[t]!==void 0&&(i+=" dirty");var G=this.getEffectiveValue(a,t),F="<select class='"+i+"' data-field='"+t+"' style='width: 100%; max-width: 100%'><option value=''>--</option>";for(var S of o.items){let B=S[o.idField];F+="<option value='"+Rt(B)+"'",B==G&&(F+=" selected"),F+=">"+Ze(S[o.textField])+"</option>"}return F+"</select>"}getEffectiveValue(e,t){var o=this.pendingChanges[e.ProductID];return o&&o[t]!==void 0?o[t]:e[t]}getColumns(){var e=super.getColumns(),t=r(d=>this.numericInputFormatter(d),"num"),o=r(d=>this.stringInputFormatter(d),"str");ue(e,d=>d.field==="QuantityPerUnit").format=o;var i=ue(e,d=>d.field===U.CategoryName);i.referencedFields=[U.CategoryID],i.format=d=>this.selectFormatter(d,U.CategoryID,l.getLookup());var a=ue(e,d=>d.field===U.SupplierCompanyName);return a.referencedFields=[U.SupplierID],a.format=d=>this.selectFormatter(d,U.SupplierID,m.getLookup()),ue(e,d=>d.field===U.UnitPrice).format=t,ue(e,d=>d.field===U.UnitsInStock).format=t,ue(e,d=>d.field===U.UnitsOnOrder).format=t,ue(e,d=>d.field===U.ReorderLevel).format=t,e}inputsChange(e){var t=this.slickGrid.getCellFromEvent(e),o=this.itemAt(t.row),i=$(e.target),a=i.data("field"),d=wi(i.val()),v=this.pendingChanges[o.ProductID],G=this.getEffectiveValue(o,a),F;i.hasClass("numeric")?F=Ye(G,"0.##"):F=G;var S;if(a==="UnitPrice"){if(S=Ni(d!=null?d:""),S==null||isNaN(S)){Nt(Ct("Validation.Decimal"),"",null),i.val(F),i.focus();return}}else if(i.hasClass("numeric")){var B=Ci(d!=null?d:"");if(isNaN(B)||B>32767||B<0){Nt(Ct("Validation.Integer"),"",null),i.val(F),i.focus();return}S=B}else i.is("select")?S=Li(i.val()):S=d;v||(this.pendingChanges[o.ProductID]=v={}),v[a]=S,o[a]=S,this.view.refresh(),i.hasClass("numeric")&&(S=Ye(S,"0.##")),i.val(S).addClass("dirty"),this.setSaveButtonState()}setSaveButtonState(){this.toolbar.findButton("apply-changes-button").toggleClass("disabled",Object.keys(this.pendingChanges).length===0)}saveClick(){if(Object.keys(this.pendingChanges).length!==0){var e=Object.keys(this.pendingChanges),t=-1,o=this;r(function i(){if(++t>=e.length){o.refresh();return}var a=e[t],d=Ri(o.pendingChanges[a]);d.ProductID=a,Ii(V.Methods.Update,{EntityId:a,Entity:d},v=>{delete o.pendingChanges[a],i()})},"saveNext")()}}getQuickFilters(){var e=super.getQuickFilters(),t=bi();if(t.cat){var o=Ei(e,i=>i.field=="CategoryID");o.init=i=>{i.element.getWidget(Pi).value=t.cat}}return e}};r(Ae,"ProductGrid"),Ae=p([Pt.registerClass(),Pt.filterable()],Ae);import{Decorators as Oi,EntityDialog as ki}from"@serenity-is/corelib";var me=class extends ki{constructor(){super(...arguments);this.form=new ie(this.idPrefix)}getFormKey(){return ie.formKey}getIdProperty(){return f.idProperty}getLocalTextPrefix(){return f.localTextPrefix}getNameProperty(){return f.nameProperty}getService(){return Le.baseUrl}};r(me,"RegionDialog"),me=p([Oi.registerClass("Serenity.Demo.Northwind.RegionDialog")],me);import{Decorators as Ui,EntityGrid as Fi}from"@serenity-is/corelib";var Me=class extends Fi{getColumnsKey(){return Ie.columnsKey}getDialogType(){return me}getIdProperty(){return f.idProperty}getLocalTextPrefix(){return f.localTextPrefix}getService(){return Le.baseUrl}};r(Me,"RegionGrid"),Me=p([Ui.registerClass("Serenity.Demo.Northwind.RegionGrid")],Me);import{Decorators as Qi,EntityDialog as Gi}from"@serenity-is/corelib";var ye=class extends Gi{constructor(){super(...arguments);this.form=new ne(this.idPrefix)}getFormKey(){return ne.formKey}getIdProperty(){return g.idProperty}getLocalTextPrefix(){return g.localTextPrefix}getNameProperty(){return g.nameProperty}getService(){return Ee.baseUrl}};r(ye,"ShipperDialog"),ye=p([Qi.registerClass()],ye);import{Decorators as Hi,EntityGrid as Ji}from"@serenity-is/corelib";var $e=class extends Ji{getColumnsKey(){return we.columnsKey}getDialogType(){return ye}getIdProperty(){return g.idProperty}getLocalTextPrefix(){return g.localTextPrefix}getService(){return Ee.baseUrl}};r($e,"ShipperGrid"),$e=p([Hi.registerClass()],$e);import{Decorators as Ki,EntityGrid as Vi}from"@serenity-is/corelib";var We=class extends Vi{getColumnsKey(){return Te.columnsKey}getDialogType(){return J}getIdProperty(){return m.idProperty}getLocalTextPrefix(){return m.localTextPrefix}getService(){return be.baseUrl}};r(We,"SupplierGrid"),We=p([Ki.registerClass("Serenity.Demo.Northwind.SupplierGrid")],We);import{Decorators as Xi,EntityDialog as Bi}from"@serenity-is/corelib";var fe=class extends Bi{constructor(){super(...arguments);this.form=new se(this.idPrefix)}getFormKey(){return se.formKey}getIdProperty(){return h.idProperty}getLocalTextPrefix(){return h.localTextPrefix}getNameProperty(){return h.nameProperty}getService(){return Oe.baseUrl}};r(fe,"TerritoryDialog"),fe=p([Xi.registerClass("Serenity.Demo.Northwind.TerritoryDialog")],fe);import{Decorators as Ai,EntityGrid as Mi}from"@serenity-is/corelib";var je=class extends Mi{getColumnsKey(){return qe.columnsKey}getDialogType(){return fe}getIdProperty(){return h.idProperty}getLocalTextPrefix(){return h.localTextPrefix}getService(){return Oe.baseUrl}};r(je,"TerritoryGrid"),je=p([Ai.registerClass("Serenity.Demo.Northwind.TerritoryGrid")],je);export{ge as CategoryColumns,K as CategoryDialog,A as CategoryForm,Xe as CategoryGrid,N as CategoryLangRow,nt as CategoryLangService,l as CategoryRow,he as CategoryService,ve as CustomerColumns,C as CustomerCustomerDemoRow,b as CustomerDemographicRow,I as CustomerDetailsRow,ce as CustomerDialog,_ as CustomerEditor,W as CustomerForm,Be as CustomerGrid,T as CustomerGrossSalesRow,de as CustomerOrderDialog,pe as CustomerOrdersGrid,q as CustomerRepresentativesRow,y as CustomerRow,De as CustomerService,j as EmployeeFormatter,xe as EmployeeListFormatter,P as EmployeeRow,L as EmployeeTerritoryRow,Pe as FreightFormatter,et as Gender,H as NoteDialog,w as NoteRow,M as NotesEditor,Re as OrderColumns,Ne as OrderDetailColumns,Y as OrderDetailDialog,z as OrderDetailForm,R as OrderDetailRow,lt as OrderDetailService,Z as OrderDetailsEditor,Q as OrderDialog,ee as OrderForm,ae as OrderGrid,u as OrderRow,te as OrderService,tt as OrderShippingState,ut as PermissionKeys,x as PhoneEditor,Ce as ProductColumns,le as ProductDialog,oe as ProductForm,Ae as ProductGrid,E as ProductLangRow,mt as ProductLangService,O as ProductLogRow,c as ProductRow,V as ProductService,Ie as RegionColumns,me as RegionDialog,ie as RegionForm,Me as RegionGrid,f as RegionRow,Le as RegionService,ze as SalesByCategoryColumns,k as SalesByCategoryRow,yt as SalesByCategoryService,we as ShipperColumns,ye as ShipperDialog,ne as ShipperForm,Se as ShipperFormatter,$e as ShipperGrid,g as ShipperRow,Ee as ShipperService,Te as SupplierColumns,J as SupplierDialog,re as SupplierForm,We as SupplierGrid,m as SupplierRow,be as SupplierService,qe as TerritoryColumns,fe as TerritoryDialog,se as TerritoryForm,je as TerritoryGrid,h as TerritoryRow,Oe as TerritoryService};
//# sourceMappingURL=index.js.map
