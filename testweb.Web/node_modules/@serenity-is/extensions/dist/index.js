var ee=Object.defineProperty;var fe=Object.getOwnPropertyDescriptor;var o=(u,r)=>ee(u,"name",{value:r,configurable:!0});var d=(u,r,e,t)=>{for(var i=t>1?void 0:t?fe(r,e):r,a=u.length-1,l;a>=0;a--)(l=u[a])&&(i=(t?l(r,e,i):l(i))||i);return t&&i&&ee(r,e,i),i};import{fieldsProxy as ye}from"@serenity-is/corelib/q";var g=class{};o(g,"UserPreferenceRow"),g.idProperty="UserPreferenceId",g.nameProperty="Name",g.localTextPrefix="Common.UserPreference",g.deletePermission="",g.insertPermission="",g.readPermission="",g.updatePermission="",g.Fields=ye();import{serviceRequest as ve}from"@serenity-is/corelib/q";var k;(e=>(e.baseUrl="Extensions/UserPreference",e.Methods={Update:"Extensions/UserPreference/Update",Retrieve:"Extensions/UserPreference/Retrieve"},["Update","Retrieve"].forEach(t=>{e[t]=function(i,a,l){return ve(e.baseUrl+"/"+t,i,a,l)}})))(k||(k={}));import{TemplatedDialog as be}from"@serenity-is/corelib";import{text as W,trimToNull as xe}from"@serenity-is/corelib/q";var O=class extends be{constructor(){super();this.dialogTitle=W("Site.BasicProgressDialog.PleaseWait")}get max(){return parseInt(this.byId("ProgressBar").attr("aria-valuemax"),10)}set max(e){this.byId("ProgressBar").attr("aria-valuemax",(e||100).toString())}get value(){return parseInt(this.byId("ProgressBar").attr("aria-valuenow"),10)}set value(e){this.byId("ProgressBar").attr("aria-valuenow",(e||0).toString()).css("width",(e||0)/(this.max||100)*100+"%").text(e+" / "+this.max)}get title(){return this.dialogTitle}set title(e){this.dialogTitle=e}getDialogButtons(){return[{text:W("Dialogs.CancelButton"),class:"btn btn-danger",click:()=>{this.cancelled=!0,this.element.closest(".ui-dialog").find(".ui-dialog-buttonpane .ui-button").attr("disabled","disabled").css("opacity","0.5"),this.element.dialog("option","title",xe(this.cancelTitle)||W("Site.BasicProgressDialog.CancelTitle"))}}]}getDialogOptions(){var e=super.getDialogOptions();return e.width=600,e}initDialog(){super.initDialog(),this.element.closest(".ui-dialog").find(".ui-dialog-titlebar-close").hide()}getTemplate(){return`<div class="s-DialogContent s-BasicProgressDialogContent">
    <div id="~_StatusText" class="status-text" ></div>
        <div id="~_Progress" class="progress" style="height: 1.5rem">
        <div id="~_ProgressBar" class="progress-bar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
    </div>
</div>`}};o(O,"BasicProgressDialog");import{confirm as Ce,format as R,notifyError as te,notifySuccess as Te,notifyWarning as Se,text as y}from"@serenity-is/corelib/q";var z=class{createProgressDialog(){this.progressDialog=new O,this.progressDialog.dialogOpen(),this.progressDialog.max=this.keys.length,this.progressDialog.value=0}getConfirmationFormat(){return y("Site.BulkServiceAction.ConfirmationFormat")}getConfirmationMessage(r){return R(this.getConfirmationFormat(),r)}confirm(r,e){Ce(this.getConfirmationMessage(r),e)}getNothingToProcessMessage(){return y("Site.BulkServiceAction.NothingToProcess")}nothingToProcess(){te(this.getNothingToProcessMessage())}getParallelRequests(){return 1}getBatchSize(){return 1}startParallelExecution(){this.createProgressDialog(),this.successCount=0,this.errorCount=0,this.pendingRequests=0,this.completedRequests=0,this.errorCount=0,this.errorByKey={},this.queue=this.keys.slice(),this.queueIndex=0;for(var r=this.getParallelRequests();r-- >0;)this.executeNextBatch()}serviceCallCleanup(){this.pendingRequests--,this.completedRequests++;var r=y(this.progressDialog.cancelled?"Site.BasicProgressDialog.CancelTitle":"Site.BasicProgressDialog.PleaseWait");r+=" (",this.successCount>0&&(r+=R(y("Site.BulkServiceAction.SuccessCount"),this.successCount)),this.errorCount>0&&(this.successCount>0&&(r+=", "),r+=R(y("Site.BulkServiceAction.ErrorCount"),this.errorCount)),this.progressDialog.title=r+")",this.progressDialog.value=this.successCount+this.errorCount,!this.progressDialog.cancelled&&this.progressDialog.value<this.keys.length?this.executeNextBatch():this.pendingRequests===0&&(this.progressDialog.dialogClose(),this.showResults(),this.done&&(this.done(),this.done=null))}executeForBatch(r){}executeNextBatch(){for(var r=this.getBatchSize(),e=[];!(e.length>=r||this.queueIndex>=this.queue.length);)e.push(this.queue[this.queueIndex++]);e.length>0&&(this.pendingRequests++,this.executeForBatch(e))}getAllHadErrorsFormat(){return y("Site.BulkServiceAction.AllHadErrorsFormat")}showAllHadErrors(){te(R(this.getAllHadErrorsFormat(),this.errorCount))}getSomeHadErrorsFormat(){return y("Site.BulkServiceAction.SomeHadErrorsFormat")}showSomeHadErrors(){Se(R(this.getSomeHadErrorsFormat(),this.successCount,this.errorCount))}getAllSuccessFormat(){return y("Site.BulkServiceAction.AllSuccessFormat")}showAllSuccess(){Te(R(this.getAllSuccessFormat(),this.successCount))}showResults(){if(this.errorCount===0&&this.successCount===0){this.nothingToProcess();return}if(this.errorCount>0&&this.successCount===0){this.showAllHadErrors();return}if(this.errorCount>0){this.showSomeHadErrors();return}this.showAllSuccess()}execute(r){if(this.keys=r,this.keys.length===0){this.nothingToProcess();return}this.confirm(this.keys.length,()=>this.startParallelExecution())}get_successCount(){return this.successCount}set_successCount(r){this.successCount=r}get_errorCount(){return this.errorCount}set_errorCount(r){this.errorCount=r}};o(z,"BulkServiceAction");import{coalesce as re,deepClone as De,postToService as Re}from"@serenity-is/corelib/q";var ie;(r=>{function u(e){return{hint:re(e.hint,"Excel"),title:re(e.title,""),cssClass:"export-xlsx-button",icon:"fa-file-excel-o",onClick:function(){if(!e.onViewSubmit())return;let t=e.grid;var i=De(t.getView().params);i.Take=0,i.Skip=0;var a=t.getView().sortBy;a&&(i.Sort=a),i.ExportColumns=[];let l=t.getGrid().getColumns();for(let s of l)i.ExportColumns.push(s.id||s.field);e.editRequest&&(i=e.editRequest(i)),Re({service:e.service,request:i,target:"_blank"})},separator:e.separator}}r.createToolButton=u,o(u,"createToolButton")})(ie||(ie={}));import{deepClone as Pe,format as Ee,formatDate as se,resolveUrl as oe,serviceCall as Ie}from"@serenity-is/corelib/q";var ae;(l=>{function u(s,c,m){return s.map(h=>{let p={dataKey:h.id||h.field,title:h.name||""};m&&m[p.dataKey]!=null&&(p.title=m[p.dataKey]);let f={};return(h.cssClass||"").indexOf("align-right")>=0?f.halign="right":(h.cssClass||"").indexOf("align-center")>=0&&(f.halign="center"),c[p.dataKey]=f,p})}o(u,"toAutoTableColumns");function r(s,c,m,h){let p=document.createElement("span"),f=0;return c.map(P=>{let n=[];for(let b=0;b<h.length;b++){var E=s.getFormatter(f,h[b]),I=s.getFormatterContext(f,b);I.item=P;let x=E?E(I):"";!x||x.indexOf("<")<0&&x.indexOf("&")<0?n.push(x):(p.innerHTML=x,p.children.length==1&&$(p.children[0]).is("select")?n.push($(p.children[0]).children("[selected]").text()):p.children.length==1&&$(p.children[0]).is(":input")?n.push($(p.children[0]).val()):p.children.length==1&&$(p.children).is(".check-box")?n.push($(p.children).hasClass("checked")?"X":""):n.push(p.textContent||""))}return f++,n})}o(r,"toAutoTableData");function e(s){var c=s.grid;if(!!s.onViewSubmit()){a();var m=Pe(c.view.params);m.Take=0,m.Skip=0;var h=c.view.sortBy;h!=null&&(m.Sort=h);var p=c.slickGrid.getColumns();p=p.filter(P=>P.id!=="__select__"),m.IncludeColumns=[];for(var f of p)m.IncludeColumns.push(f.id||f.field);Ie({url:c.view.url,request:m,onSuccess:P=>{let n=new jsPDF("l","pt"),E=p,I={},b=u(E,I,s.columnTitles);var x=b.map(C=>C.dataKey);let me=P.Entities||[],he=r(c.slickGrid,me,x,E);n.setFontSize(s.titleFontSize||10),n.setFont("helvetica","bold");let ge=s.reportTitle||c.getTitle()||"Report";n.autoTableText(ge,n.internal.pageSize.width/2,s.titleTop||25,{halign:"center"});var Y="{{T}}";let Z=s.pageNumbers==null||s.pageNumbers;var D=$.extend({margin:{top:25,left:25,right:25,bottom:Z?25:30},startY:60,styles:{fontSize:8,overflow:"linebreak",cellPadding:2,valign:"middle"},columnStyles:I},s.tableOptions),_,G;if(Z&&(_=o(function(C){var U=C.pageCount;typeof n.putTotalPages=="function"&&(U=U+" / "+Y),n.autoTableText(U,n.internal.pageSize.width/2,n.internal.pageSize.height-D.margin.bottom,{halign:"center"})},"footer")),(s.printDateTimeHeader==null||s.printDateTimeHeader)&&(G=o(function(C){n.setFont("helvetica","normal"),n.setFontSize(8),n.autoTableText(se(new Date,"dd-MM-yyyy HH:mm"),n.internal.pageSize.width-D.margin.right,13,{halign:"right"})},"header")),D.didDrawPage=C=>{G&&G(C),_&&_(C)},D.head=[b],D.body=he,n.autoTable(D),typeof n.putTotalPages=="function"&&n.putTotalPages(Y),!s.output||s.output=="file"){var K=s.fileName||s.reportTitle||"{0}_{1}.pdf";K=Ee(K,c.getTitle()||"report",se(new Date,"yyyyMMdd_HHmm")),n.save(K);return}s.autoPrint&&n.autoPrint();var M=s.output;M=="newwindow",M="dataurlnewwindow",n.output(M)}})}}l.exportToPdf=e,o(e,"exportToPdf");function t(s){return{title:s.title||"",hint:s.hint||"PDF",cssClass:"export-pdf-button",onClick:()=>e(s),separator:s.separator}}l.createToolButton=t,o(t,"createToolButton");function i(){if(typeof jsPDF=="undefined"){var s=$("jsPDFScript");s.length>0||($("<script/>").attr("type","text/javascript").attr("id","jsPDFScript").attr("src",oe("~/Serenity.Assets/Scripts/jspdf.min.js")).appendTo(document.head),typeof jsPDF=="undefined"&&typeof jspdf!="undefined"&&(window.jsPDF=jspdf.jsPDF))}}o(i,"includeJsPDF");function a(){if(i(),!(typeof jsPDF=="undefined"||typeof jsPDF.API=="undefined"||typeof jsPDF.API.autoTable!="undefined")){var s=$("jsPDFAutoTableScript");s.length>0||$("<script/>").attr("type","text/javascript").attr("id","jsPDFAutoTableScript").attr("src",oe("~/Serenity.Assets/Scripts/jspdf.plugin.autotable.min.js")).appendTo(document.head)}}o(a,"includeAutoTable")})(ae||(ae={}));import{Decorators as H,EnumTypeRegistry as ke}from"@serenity-is/corelib";import{attrEncode as Oe,htmlEncode as ne,text as Fe,tryGetText as we}from"@serenity-is/corelib/q";var v=class{constructor(){this.allowClear=!0}format(r){var e=ke.get(this.enumKey),t="<select>";this.allowClear&&(t+='<option value="">',t+=ne(this.emptyItemText||Fe("Controls.SelectEditor.EmptyItemText")),t+="</option>");for(var i of Object.keys(e).filter(l=>!isNaN(parseInt(l,10)))){t+='<option value="'+Oe(i)+'"',i==r.value&&(t+=" selected");var a=e[i];t+=">",t+=ne(we("Enums."+this.enumKey+"."+a)||a),t+="</option>"}return t+="</select>",t}};o(v,"EnumSelectFormatter"),d([H.option()],v.prototype,"enumKey",2),d([H.option()],v.prototype,"allowClear",2),d([H.option()],v.prototype,"emptyItemText",2),v=d([H.registerFormatter("Serenity.Extensions.EnumSelectFormatter")],v);import{Decorators as qe}from"@serenity-is/corelib";import{toSingleLine as Be}from"@serenity-is/corelib/q";var T=class{format(r){return T.formatValue(r.value)}static formatValue(r){var e=$("<div/>").html(r||"").text();return Be(e)}};o(T,"SingleLineTextFormatter"),T=d([qe.registerFormatter("Serenity.Extensions.SingleLineTextFormatter")],T);import{Decorators as Q,EntityGrid as Ae,IGetEditValue as Ve,ISetEditValue as He}from"@serenity-is/corelib";import{deepClone as j,indexOf as je,tryFirst as Ne}from"@serenity-is/corelib/q";var F=class extends Ae{constructor(e,t){super(e,t);this.nextId=1}getIdProperty(){return"__id"}id(e){return e[this.getIdProperty()]}getNextId(){return"`"+this.nextId++}setNewId(e){e[this.getIdProperty()]=this.getNextId()}save(e,t){var i=e.request,a=j(i.Entity),l=this.id(a);if(l==null&&(a[this.getIdProperty()]=this.getNextId()),!!this.validateEntity(a,l)){var s=this.view.getItems().slice();if(l==null)s.push(a);else{var c=je(s,m=>this.id(m)===l);s[c]=j({},s[c],a)}this.setEntities(s),t({})}}deleteEntity(e){return this.view.deleteItem(e),!0}validateEntity(e,t){return!0}setEntities(e){this.view.setItems(e,!0)}getNewEntity(){return{}}getButtons(){var e=super.getButtons(),t=Ne(e,i=>i.cssClass=="add-button");return t!=null&&(t.onClick=()=>{this.createEntityDialog(this.getItemType(),i=>{var a=i;a.onSave=(l,s)=>this.save(l,s),this.transferDialogReadOnly(a),a.loadEntityAndOpenDialog(this.getNewEntity())})}),e.filter(i=>i.cssClass!="refresh-button")}editItem(e){var t=e,i=this.view.getItemById(t);this.createEntityDialog(this.getItemType(),a=>{var l=a;l.onDelete=(s,c)=>{!this.deleteEntity(t)||c({})},this.transferDialogReadOnly(l),l.onSave=(s,c)=>this.save(s,c),l.loadEntityAndOpenDialog(i)})}getEditValue(e,t){t[e.name]=this.value}setEditValue(e,t){this.value=e[t.name]}get value(){var e=this.getIdProperty();return this.view.getItems().map(t=>{var i=j(t),a=i[e];return a&&a.toString().charAt(0)=="`"&&delete i[e],i})}set value(e){var t=this.getIdProperty();this.view.setItems((e||[]).map(i=>{var a=j(i);return a[t]==null&&(a[t]="`"+this.getNextId()),a}),!0)}getGridCanLoad(){return!1}usePager(){return!1}getInitialTitle(){return null}createQuickSearchInput(){}};o(F,"GridEditorBase"),F=d([Q.registerClass([Ve,He]),Q.editor(),Q.element("<div/>")],F);import{Decorators as Le,EntityDialog as _e}from"@serenity-is/corelib";var w=class extends _e{getIdProperty(){return"__id"}destroy(){this.onSave=null,this.onDelete=null,super.destroy()}updateInterface(){super.updateInterface(),this.applyChangesButton&&this.applyChangesButton.hide()}saveHandler(e,t){this.onSave&&this.onSave(e,t)}deleteHandler(e,t){this.onDelete&&this.onDelete(e,t)}};o(w,"GridEditorDialog"),w=d([Le.registerClass()],w);import{PropertyGrid as Ke,TemplatedDialog as $e}from"@serenity-is/corelib";import{resolveUrl as Me,serviceCall as Ue}from"@serenity-is/corelib/q";import{coalesce as N,postToUrl as Ge}from"@serenity-is/corelib/q";var L;(e=>{function u(t){return{title:N(t.title,"Report"),cssClass:N(t.cssClass,"print-button"),icon:t.icon,onClick:()=>{e.execute(t)}}}e.createToolButton=u,o(u,"createToolButton");function r(t){var i=t.getParams?t.getParams():t.params;Ge({url:"~/Serenity.Extensions/Report/"+(t.download?"Download":"Render"),params:{key:t.reportKey,ext:N(t.extension,"pdf"),opt:i?$.toJSON(i):""},target:N(t.target,"_blank")})}e.execute=r,o(r,"execute")})(L||(L={}));var q=class extends $e{constructor(e){super(e);this.updateInterface(),this.loadReport(this.options.reportKey)}getDialogButtons(){return null}createPropertyGrid(){this.propertyGrid&&this.byId("PropertyGrid").html("").attr("class",""),this.propertyGrid=new Ke(this.byId("PropertyGrid"),{idPrefix:this.idPrefix,useCategories:!0,items:this.report.Properties}).init(null)}loadReport(e){Ue({url:Me("~/Serenity.Extensions/Report/Retrieve"),request:{ReportKey:e},onSuccess:t=>{this.report=t,this.dialogTitle=this.report.Title,this.createPropertyGrid(),this.propertyGrid.load(this.report.InitialSettings||{}),this.updateInterface(),this.dialogOpen()}})}updateInterface(){this.toolbar.findButton("print-preview-button").toggle(this.report&&!this.report.IsDataOnlyReport&&!this.report.IsExternalReport),this.toolbar.findButton("run-button").toggle(this.report&&this.report.IsExternalReport),this.toolbar.findButton("export-pdf-button").toggle(this.report&&!this.report.IsDataOnlyReport&&!this.report.IsExternalReport),this.toolbar.findButton("export-xlsx-button").toggle(this.report&&this.report.IsDataOnlyReport&&!this.report.IsExternalReport)}executeReport(e,t,i){if(!!this.validateForm()){var a={};this.propertyGrid.save(a),L.execute({download:i,reportKey:this.report.ReportKey,extension:t,target:e,params:a})}}getToolbarButtons(){return[{title:"Preview",cssClass:"print-preview-button",onClick:()=>this.executeReport("_blank",null,!1)},{title:"Run",cssClass:"run-button",icon:"fa-print text-blue",onClick:()=>this.executeReport("_blank",null,!1)},{title:"PDF",cssClass:"export-pdf-button",onClick:()=>this.executeReport("_blank","pdf",!0)},{title:"Excel",cssClass:"export-xlsx-button",onClick:()=>this.executeReport("_blank","xlsx",!0)}]}getTemplate(){return`<div class="s-DialogContent">
<div id="~_Toolbar" class="s-DialogToolbar">
</div>
<div class="s-Form">
    <form id="~_Form" action="">
        <div class="fieldset ui-widget ui-widget-content ui-corner-all">
            <div id="~_PropertyGrid"></div>
            <div class="clear"></div>
        </div>
    </form>
</div>
</div>`}};o(q,"ReportDialog");import{QuickSearchInput as We,Widget as ze}from"@serenity-is/corelib";import{coalesce as Qe,trimToNull as Je}from"@serenity-is/corelib/q";var J=class extends ze{constructor(r){super(r),$(".report-link",r).click(e=>this.reportLinkClick(e)),new We($(".s-QuickSearchBar input",r),{onSearch:(e,t,i)=>{this.updateMatchFlags(t),i(!0)}})}updateMatchFlags(r){var e=$(".report-list",this.element).find("li").removeClass("non-match");if(r=Je(r),!!r){r=Select2.util.stripDiacritics(r).toUpperCase();var t=e.filter(".report-item");t.each(function(s,c){var m=$(c),h=Select2.util.stripDiacritics(Qe(m.text(),"").toUpperCase());h.indexOf(r)<0&&m.addClass("non-match")});var i=t.not(".non-match"),a=i.parents("li").add(i);a.children("[data-bs-toggle]:not([aria-expanded=true])").attr("aria-expanded","true").removeClass("collapsed"),a.parent(".collapse:not(.show)").addClass("show");var l=e.not(a);l.addClass("non-match")}}reportLinkClick(r){r.preventDefault(),new q({reportKey:$(r.target).data("key")}).dialogOpen()}};o(J,"ReportPage");var X=class{getItem(r){let e;return k.Retrieve({PreferenceType:"UserPreferenceStorage",Name:r},t=>e=t.Value,{async:!1}),e}setItem(r,e){k.Update({PreferenceType:"UserPreferenceStorage",Name:r,Value:e})}};o(X,"UserPreferenceStorage");import{TemplatedDialog as Xe,WX as Ye}from"@serenity-is/corelib";import{confirm as Ze,text as et}from"@serenity-is/corelib/q";var le;(r=>{function u(e,t){e.on("dialogbeforeclose panelbeforeclose",function(i){!Ye.hasOriginalEvent(i)||!t()||(i.preventDefault(),Ze(et("Site.Dialogs.PendingChangesConfirmation"),()=>e.find("div.save-and-close-button").click(),{onNo:function(){e.hasClass("ui-dialog-content")?e.dialog("close"):e.hasClass("s-Panel")&&Xe.closePanel(e)}}))})}r.pendingChangesConfirmation=u,o(u,"pendingChangesConfirmation")})(le||(le={}));import{Decorators as tt,PropertyDialog as rt}from"@serenity-is/corelib";import{coalesce as it,isEmptyOrNull as ue,text as pe}from"@serenity-is/corelib/q";var S=class extends rt{constructor(r){if(super(r),ue(this.options.cssClass)||this.element.addClass(this.options.cssClass),!ue(this.options.message)){var e=$("<div/>").addClass("message").insertBefore(this.byId("PropertyGrid"));this.options.isHtml?e.html(this.options.message):e.text(this.options.message)}this.dialogTitle=this.options.title||"Prompt"}getDialogButtons(){return[{text:pe("Dialogs.OkButton"),click:()=>{!this.validateForm()||(this.options.validateValue==null||this.options.validateValue(this.value))&&this.dialogClose()}},{text:pe("Dialogs.CancelButton"),click:()=>this.dialogClose()}]}loadInitialEntity(){this.value=this.options.value}getPropertyItems(){return[{name:"Value",editorType:this.options.editorType||"String",required:it(this.options.required,!0),editorParams:this.options.editorOptions}]}get value(){return this.getSaveEntity().Value}set value(r){this.propertyGrid.load({Value:r})}static prompt(r,e,t,i){new S({title:r,message:e,value:t,validateValue:a=>i(a)}).dialogOpen()}};o(S,"PromptDialog"),S=d([tt.registerClass()],S);import{Decorators as st,EntityGrid as ot}from"@serenity-is/corelib";var B=class extends ot{getSlickOptions(){var r=super.getSlickOptions();return r.enableTextSelectionOnCells=!0,r.selectedCellCssClass="slick-row-selected",r.enableCellNavigation=!0,r}createSlickGrid(){var r=super.createSlickGrid();return r.setSelectionModel(new Slick.RowSelectionModel),r}};o(B,"SelectableEntityGrid"),B=d([st.registerClass()],B);import{CascadedWidgetLink as at,Decorators as nt,EditorUtils as lt,Select2AjaxEditor as ut,Widget as pt}from"@serenity-is/corelib";import{ColumnSelection as ct,isEmptyOrNull as dt,RetrieveColumnSelection as mt,serviceCall as ht}from"@serenity-is/corelib/q";var A=class extends ut{constructor(e,t){super(e,t);this.setCascadeFrom(this.options.cascadeFrom)}setCascadeFrom(e){if(dt(e)){this.cascadeLink&&(this.cascadeLink.set_parentID(null),this.cascadeLink=null),this.options.cascadeFrom=null;return}this.cascadeLink=new at(pt,this,t=>this.cascadeValue=this.getCascadeFromValue(t)),this.cascadeLink.set_parentID(e),this.options.cascadeFrom=e}get cascadeValue(){return this.options.cascadeValue}set cascadeValue(e){e!==this.options.cascadeValue&&(this.options.cascadeValue=e,this.value=null)}get cascadeField(){return this.options.cascadeField||this.options.cascadeFrom}set cascadeField(e){this.options.cascadeField=e}get cascadeFrom(){return this.options.cascadeFrom}set cascadeFrom(e){e!==this.options.cascadeFrom&&this.setCascadeFrom(e)}getCascadeFromValue(e){return lt.getValue(e)}getIncludeColumns(){return[]}getSort(){return[]}getTypeDelay(){return 200}executeQueryByKey(e){var t=e.request;t.ColumnSelection=mt.keyOnly,t.IncludeColumns=this.getIncludeColumns(),super.executeQueryByKey(e)}executeQuery(e){var t=e.request;t.ColumnSelection=ct.KeyOnly,t.IncludeColumns=this.getIncludeColumns(),t.Sort=this.getSort(),t.ExcludeTotalCount=!0,this.cascadeField&&(t.EqualityFilter=t.EqualityFilter||{},t.EqualityFilter[this.cascadeField]=this.cascadeValue),e.blockUI=!1,e.error=()=>{},this.lastRequest!=null&&this.lastRequest.readyState!=XMLHttpRequest.DONE&&this.lastRequest.abort(),this.lastRequest=ht(e),this.lastRequest.then(()=>this.lastRequest=null,()=>this.lastRequest=null)}};o(A,"ServiceEditorBase"),A=d([nt.registerClass()],A);import{Decorators as ce,ISetEditValue as gt,Widget as ft}from"@serenity-is/corelib";import{coalesce as de,text as yt}from"@serenity-is/corelib/q";var V=class extends ft{constructor(e,t){super(e,t);this.options.hideLabel&&this.element.closest(".field").find(".caption").hide(),this.updateElementContent()}updateElementContent(){var e=de(this.options.text,this.value);this.options.isLocalText&&(e=yt(e)),this.options.isHtml?this.element.html(e):this.element.text(e)}setEditValue(e,t){this.options.text==null&&(this.value=de(this.options.text,e[t.name]),this.updateElementContent())}};o(V,"StaticTextBlock"),V=d([ce.element("<div/>"),ce.registerEditor("Serenity.Extensions.StaticTextBlock",[gt])],V);export{O as BasicProgressDialog,z as BulkServiceAction,le as DialogUtils,v as EnumSelectFormatter,ie as ExcelExportHelper,F as GridEditorBase,w as GridEditorDialog,ae as PdfExportHelper,S as PromptDialog,q as ReportDialog,L as ReportHelper,J as ReportPage,B as SelectableEntityGrid,A as ServiceEditorBase,T as SingleLineTextFormatter,V as StaticTextBlock,g as UserPreferenceRow,k as UserPreferenceService,X as UserPreferenceStorage};
//# sourceMappingURL=index.js.map
