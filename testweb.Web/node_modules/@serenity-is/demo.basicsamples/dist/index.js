var Ie=Object.defineProperty;var it=Object.getOwnPropertyDescriptor;var r=(a,e)=>Ie(a,"name",{value:e,configurable:!0});var i=(a,e,t,o)=>{for(var s=o>1?void 0:o?it(e,t):e,m=a.length-1,n;m>=0;m--)(n=a[m])&&(s=(o?n(e,t,s):n(s))||s);return o&&s&&Ie(e,t,s),s};import{serviceRequest as st}from"@serenity-is/corelib/q";var de;(t=>(t.baseUrl="Serenity.Demo.BasicSamples",t.Methods={OrdersByShipper:"Serenity.Demo.BasicSamples/OrdersByShipper"},["OrdersByShipper"].forEach(o=>{t[o]=function(s,m,n){return st(t.baseUrl+"/"+o,s,m,n)}})))(de||(de={}));import{Decorators as at,LookupEditorBase as mt}from"@serenity-is/corelib";import{formatNumber as nt}from"@serenity-is/corelib/q";import{ProductRow as pt}from"@serenity-is/demo.northwind";var u=class extends mt{constructor(e,t){super(e,t)}getLookupKey(){return pt.lookupKey}getItemText(e,t){return super.getItemText(e,t)+" ($"+nt(e.UnitPrice,"#,##0.00")+", "+(e.UnitsInStock>0?e.UnitsInStock+" in stock":"out of stock")+", "+(e.SupplierCompanyName||"Unknown")+")"}};r(u,"ChangingLookupTextEditor"),u=i([at.registerEditor("Serenity.Demo.BasicSamples.ChangingLookupTextEditor")],u);import{DecimalEditor as ct,IntegerEditor as lt,PrefixedContext as ut}from"@serenity-is/corelib";import{initFormType as dt}from"@serenity-is/corelib/q";var N=class extends ut{constructor(e){if(super(e),!N.init){N.init=!0;var t=u,o=ct,s=lt;dt(N,["ProductID",t,"UnitPrice",o,"Quantity",s,"Discount",o])}}},d=N;r(d,"ChangingLookupTextForm"),d.formKey="BasicSamples.ChangingLookupText";import{CustomerEditor as Dt}from"@serenity-is/demo.northwind";import{DateEditor as xt,LookupEditor as St,PrefixedContext as Pt}from"@serenity-is/corelib";import{Decorators as ht}from"@serenity-is/corelib";import{OrderDetailsEditor as vt}from"@serenity-is/demo.northwind";import{Decorators as ft}from"@serenity-is/corelib";import{OrderDetailDialog as yt,OrderDetailForm as gt,ProductRow as Ct}from"@serenity-is/demo.northwind";var f=class extends yt{constructor(){super();this.form=new gt(this.idPrefix),this.form.ProductID.cascadeField=Ct.Fields.CategoryID}beforeLoadEntity(t){super.beforeLoadEntity(t),this.form.ProductID.cascadeValue=this.categoryID}};r(f,"FilteredLookupOrderDetailDialog"),f=i([ft.registerClass("Serenity.Demo.BasicSamples.FilteredLookupOrderDetailDialog")],f);var y=class extends vt{constructor(t){super(t)}getDialogType(){return f}initEntityDialog(t,o){super.initEntityDialog(t,o),o.categoryID=this.categoryID}};r(y,"FilteredLookupDetailEditor"),y=i([ht.registerEditor("Serenity.Demo.BasicSamples.FilteredLookupDetailEditor")],y);import{initFormType as Et}from"@serenity-is/corelib/q";var U=class extends Pt{constructor(e){if(super(e),!U.init){U.init=!0;var t=Dt,o=xt,s=St,m=y;Et(U,["CustomerID",t,"OrderDate",o,"CategoryID",s,"DetailList",m])}}},g=U;r(g,"FilteredLookupInDetailForm"),g.formKey="BasicSamples.FilteredLookupInDetail";import{Decorators as bt,Select2Editor as It}from"@serenity-is/corelib";var C=class extends It{constructor(e){super(e,null),this.addOption("key1","Text 1"),this.addOption("key2","Text 2"),this.addItem({id:"key3",text:"Text 3"}),this.addItem({id:"key4",text:"Text 4",disabled:!0})}};r(C,"HardcodedValuesEditor"),C=i([bt.registerEditor("Serenity.Demo.BasicSamples.HardcodedValuesEditor")],C);import{PrefixedContext as Ot}from"@serenity-is/corelib";import{initFormType as wt}from"@serenity-is/corelib/q";var F=class extends Ot{constructor(e){if(super(e),!F.init){F.init=!0;var t=C;wt(F,["SomeValue",t])}}},h=F;r(h,"HardcodedValuesForm"),h.formKey="BasicSamples.HarcodedValues";import{Decorators as he}from"@serenity-is/corelib";import{resolveUrl as Oe}from"@serenity-is/corelib/q";var c=class{format(e){var t=this.fileProperty?e.item[this.fileProperty]:e.value;if(!t||!t.length)return"";let o=Oe("~/upload/"+t);if(this.thumb){var s=t.split(".");t=s.slice(0,s.length-1).join(".")+"_t.jpg"}let m=Oe("~/upload/"+t);return`<a class="inline-image" target='_blank' href="${o}"><img src="${m}" style='max-height: 145px; max-width: 100%;' /></a>`}initializeColumn(e){this.fileProperty&&(e.referencedFields=e.referencedFields||[],e.referencedFields.push(this.fileProperty))}};r(c,"InlineImageFormatter"),i([he.option()],c.prototype,"fileProperty",2),i([he.option()],c.prototype,"thumb",2),c=i([he.registerFormatter("Serenity.Demo.BasicSamples.InlineImageFormatter")],c);var R=class{};r(R,"InlineImageInGridColumns"),R.columnsKey="BasicSamples.InlineImageInGrid";import{StringEditor as Rt,ImageUploadEditor as Lt,BooleanEditor as Nt,LookupEditor as Ut,DecimalEditor as Ft,IntegerEditor as Kt,PrefixedContext as Qt}from"@serenity-is/corelib";import{Decorators as Tt,LookupEditorBase as Bt}from"@serenity-is/corelib";import{CategoryRow as kt}from"@serenity-is/demo.northwind";var v=class extends Bt{constructor(e,t){super(e,t)}getLookupKey(){return kt.lookupKey}getItems(e){return super.getItems(e).filter(t=>t.CategoryName==="Produce"||t.CategoryName==="Seafood")}};r(v,"ProduceSeafoodCategoryEditor"),v=i([Tt.registerEditor("Serenity.Demo.BasicSamples.ProduceSeafoodCategoryEditor")],v);import{initFormType as Jt}from"@serenity-is/corelib/q";var K=class extends Qt{constructor(e){if(super(e),!K.init){K.init=!0;var t=Rt,o=Lt,s=Nt,m=Ut,n=v,k=Ft,l=Kt;Jt(K,["ProductName",t,"ProductImage",o,"Discontinued",s,"SupplierID",m,"CategoryID",n,"QuantityPerUnit",t,"UnitPrice",k,"UnitsInStock",l,"UnitsOnOrder",l,"ReorderLevel",l])}}},L=K;r(L,"LookupFilterByMultipleForm"),L.formKey="BasicSamples.LookupFilterByMultiple";import{CustomerEditor as Vt,OrderDetailsEditor as $t}from"@serenity-is/demo.northwind";import{StringEditor as At,DateEditor as qt,LookupEditor as Wt,PrefixedContext as _t}from"@serenity-is/corelib";import{initFormType as Yt}from"@serenity-is/corelib/q";var Q=class extends _t{constructor(e){if(super(e),!Q.init){Q.init=!0;var t=Vt,o=At,s=qt,m=Wt,n=$t;Yt(Q,["CustomerID",t,"CustomerContactName",o,"CustomerContactTitle",o,"CustomerCity",o,"CustomerRegion",o,"CustomerCountry",o,"CustomerPhone",o,"CustomerFax",o,"OrderDate",s,"RequiredDate",s,"EmployeeID",m,"DetailList",n])}}},D=Q;r(D,"PopulateLinkedDataForm"),D.formKey="BasicSamples.PopulateLinkedData";import{StaticTextBlock as jt}from"@serenity-is/extensions";import{StringEditor as zt,PrefixedContext as Mt}from"@serenity-is/corelib";import{initFormType as Ht}from"@serenity-is/corelib/q";var J=class extends Mt{constructor(e){if(super(e),!J.init){J.init=!0;var t=jt,o=zt;Ht(J,["StaticText",t,"SomeInput",o,"HtmlList",t,"FromLocalText",t,"DisplayFieldValue",t])}}},x=J;r(x,"StaticTextBlockForm"),x.formKey="BasicSamples.StaticTextBlock";import{Decorators as ve,TemplatedDialog as Xt}from"@serenity-is/corelib";var we=["#4E79A7","#A0CBE8","#F28E2B","#FFBE7D","#59A14F","#8CD17D","#B6992D","#F1CE63","#499894","#86BCB6","#E15759","#FF9D9A","#79706E","#BAB0AC","#D37295","#FABFD2","#B07AA1","#D4A6C8","#9D7660","#D7B5A6"],S=class extends Xt{static initializePage(){$(function(){$("#LaunchDialogButton").click(function(t){new S().dialogOpen()})})}onDialogOpen(){super.onDialogOpen(),de.OrdersByShipper({},t=>{this.areaChart=new Chart(document.getElementById(this.idPrefix+"Chart"),{type:"bar",data:{labels:t.Values.map(o=>o.Month),datasets:t.ShipperKeys.map((o,s)=>({label:t.ShipperLabels[s],fill:!0,backgroundColor:we[s%we.length],data:t.Values.map((m,n)=>t.Values[n][o])}))}})})}getTemplate(){return"<canvas id='~_Chart'></div>"}getDialogOptions(){var t=super.getDialogOptions();return t.title="Orders by Shipper",t}};r(S,"ChartInDialog"),S=i([ve.registerClass("Serenity.Demo.BasicSamples.ChartInDialog"),ve.resizable(),ve.maximizable()],S);import{Decorators as Te}from"@serenity-is/corelib";import{endsWith as Zt}from"@serenity-is/corelib/q";import{ProductDialog as Gt}from"@serenity-is/demo.northwind";var P=class extends Gt{updateInterface(){super.updateInterface(),this.cloneButton.toggle(this.isEditMode())}getCloningEntity(){var e=super.getCloningEntity(),t=" (Clone)";return Zt(e.ProductName||"",t)||(e.ProductName=(e.ProductName||"")+t),e.ProductImage=null,e.UnitsInStock=0,e.UnitsOnOrder=0,e}};r(P,"CloneableEntityDialog"),P=i([Te.registerClass("Serenity.Demo.BasicSamples.ProductDialog"),Te.maximizable()],P);import{Decorators as er,EntityGrid as tr}from"@serenity-is/corelib";import{ProductRow as Be,ProductColumns as rr,ProductService as or}from"@serenity-is/demo.northwind";var V=class extends tr{getColumnsKey(){return rr.columnsKey}getDialogType(){return P}getIdProperty(){return Be.idProperty}getLocalTextPrefix(){return Be.localTextPrefix}getService(){return or.baseUrl}};r(V,"CloneableEntityGrid"),V=i([er.registerClass("Serenity.Demo.BasicSamples.CloneableEntityGrid")],V);import{Decorators as ir}from"@serenity-is/corelib";import{formatDate as sr}from"@serenity-is/corelib/q";import{OrderGrid as ar,EmployeeRow as De,ShipperRow as ke,OrderDialog as mr,ProductRow as nr}from"@serenity-is/demo.northwind";var A=class extends ar{constructor(e){super(e)}addButtonClick(){this.editItem({CustomerID:"ANTON",RequiredDate:sr(new Date,"yyyy-MM-dd"),EmployeeID:De.getLookup().items.filter(e=>e.FullName==="Robert King")[0].EmployeeID,ShipVia:ke.getLookup().items.filter(e=>e.CompanyName==="Speedy Express")[0].ShipperID})}getButtons(){var e=super.getButtons();return e.push({title:"Add Order from the Queen",cssClass:"add-button",onClick:()=>{this.editItem({CustomerID:"QUEEN",EmployeeID:De.getLookup().items.filter(t=>t.FullName==="Nancy Davolio")[0].EmployeeID,ShipVia:ke.getLookup().items.filter(t=>t.CompanyName==="United Package")[0].ShipperID})}}),e.push({title:"Add Order with 5 Chai by Laura",cssClass:"add-note-button",onClick:()=>{var t=new mr;this.initDialog(t);var o=nr.getLookup().items.filter(m=>m.ProductName==="Chai")[0],s=De.getLookup().items.filter(m=>m.FullName==="Laura Callahan")[0].EmployeeID;t.loadEntityAndOpenDialog({CustomerID:"GOURL",EmployeeID:s,DetailList:[{ProductID:o.ProductID,ProductName:o.ProductName,UnitPrice:o.UnitPrice,Quantity:5,LineTotal:o.UnitPrice*5}]})}}),e}};r(A,"DefaultValuesInNewGrid"),A=i([ir.registerClass("Serenity.Demo.BasicSamples.DefaultValuesInNewGrid")],A);import{alert as Le,confirm as Ne,information as pr,notifySuccess as fe,notifyInfo as cr,notifyError as lr,success as ur,warning as dr}from"@serenity-is/corelib/q";var Re;(e=>{function a(){fr(),yr(),gr(),Cr(),hr(),vr(),Dr()}e.initializePage=a,r(a,"initializePage")})(Re||(Re={}));function fr(){$("#ConfirmDialogButtons").click(()=>{Ne("Click one of buttons, or close dialog with [x] on top right, i'll tell you what you did!",()=>{fe("You clicked YES. Great!")},{onNo:()=>{cr("You clicked NO. Why?")},onCancel:()=>{lr("You clicked X. Operation is cancelled. Will try again?")}})})}r(fr,"confirmDialogButtons");function yr(){$("#ConfirmWithCustomTitle").click(()=>{Ne("This confirmation has a custom title",()=>{fe("Allright!")},{title:"Some Custom Confirmation Title"})})}r(yr,"confirmWithCustomTitle");function gr(){$("#Information").click(()=>{pr("What a nice day",()=>{fe("No problem!")})})}r(gr,"informationDialog");function Cr(){$("#Success").click(()=>{ur("Operation complete",()=>{fe("Well done!")})})}r(Cr,"successDialog");function hr(){$("#Warning").click(()=>{dr("Hey, be careful!")})}r(hr,"warningDialog");function vr(){$("#Alert").click(()=>{Le("Houston, we got a problem!")})}r(vr,"alertDialog");function Dr(){$("#AlertWithHtmlContent").click(()=>{Le("<h4>Here is some HTML content!</h4><ul><li>Item 1</li><li>Item 2</li ><li>Visit <a href='http://serenity.is/' target='_blank' style='color: #ddf'>http://serenity.is/</a>!</li></ul>",{htmlEncode:!1})})}r(Dr,"alertWithHtmlContent");import{Decorators as xr}from"@serenity-is/corelib";import{OrderDialog as Sr}from"@serenity-is/demo.northwind";var q=class extends Sr{constructor(){super()}updateInterface(){super.updateInterface(),this.deleteButton.hide(),this.applyChangesButton.hide()}onSaveSuccess(e){this.showSaveSuccessMessage(e)}};r(q,"EntityDialogAsPanel"),q=i([xr.panel()],q);import{Decorators as Pr}from"@serenity-is/corelib";import{notifySuccess as Er,notifyInfo as br}from"@serenity-is/corelib/q";import{CategoryDialog as Ir,CategoryService as Or}from"@serenity-is/demo.northwind";var E=class extends Ir{onSaveSuccess(e){this.isNew()&&(Er("Just inserted a category with ID: "+e.EntityId),Or.Retrieve({EntityId:e.EntityId},t=>{br("Looks like the category you added has name: "+t.Entity.CategoryName)}))}};r(E,"GetInsertedRecordIdDialog"),E=i([Pr.registerClass("Serenity.Demo.BasicSamples.GetInsertedRecordIdDialog")],E);import{Decorators as wr}from"@serenity-is/corelib";import{CategoryGrid as Tr}from"@serenity-is/demo.northwind";var W=class extends Tr{getDialogType(){return E}constructor(e){super(e)}};r(W,"GetInsertedRecordIdGrid"),W=i([wr.registerClass("Serenity.Demo.BasicSamples.GetInsertedRecordIdGrid")],W);import{Decorators as Br,PropertyGrid as kr,TabsExtensions as Ue,Toolbar as Rr}from"@serenity-is/corelib";import{first as Lr,getForm as Nr,isEmptyOrNull as Ur,notifySuccess as Fr,reloadLookup as Kr,text as Qr,validateOptions as Jr}from"@serenity-is/corelib/q";import{OrderDialog as Vr,CustomerForm as Fe,CustomerRow as Ke,CustomerService as Qe}from"@serenity-is/demo.northwind";var b=class extends Vr{constructor(){super();this.customerPropertyGrid=new kr(this.byId("CustomerPropertyGrid"),{idPrefix:this.idPrefix+"_Customer_",items:Nr(Fe.formKey).filter(o=>o.name!="CustomerID"),useCategories:!0}),this.customerForm=new Fe(this.customerPropertyGrid.idPrefix),this.customerValidator=this.byId("CustomerForm").validate(Jr({}));var t=0;new Rr(this.byId("CustomerToolbar"),{buttons:[{cssClass:"apply-changes-button",title:Qr("Controls.EntityDialog.SaveButton"),onClick:()=>{var o=this.getCustomerID();if(!!o&&!!this.customerValidator.form()){var s={};this.customerPropertyGrid.save(s),Qe.Update({EntityId:o,Entity:s},m=>{Kr(Ke.lookupKey),t++;try{this.form.CustomerID.element.change()}finally{t--}Fr("Saved customer details")})}}}]}),this.form.CustomerID.change(o=>{if(!t){var s=this.getCustomerID();if(Ue.setDisabled(this.tabs,"Customer",!s),!s){this.customerPropertyGrid.load({});return}Qe.Retrieve({EntityId:s},m=>{this.customerPropertyGrid.load(m.Entity)})}})}getCustomerID(){var t=this.form.CustomerID.value;return Ur(t)?null:Lr(Ke.getLookup().items,o=>o.CustomerID==t).ID}loadEntity(t){super.loadEntity(t),Ue.setDisabled(this.tabs,"Customer",!this.getCustomerID())}getTemplate(){return`<div id="~_Tabs" class="s-DialogContent">
    <ul>
        <li><a href="#~_TabOrder"><span>Order</span></a></li>
        <li><a href="#~_TabCustomer"><span>Customer</span></a></li>
    </ul>
    <div id="~_TabOrder" class="tab-pane s-TabOrder">
        <div id="~_Toolbar" class="s-DialogToolbar">
        </div>
        <div class="s-Form">
            <form id="~_Form" action="">
                <div class="fieldset">
                    <div id="~_PropertyGrid"></div>
                    <div class="clear"></div>
                </div>
            </form>
        </div>
    </div>
    <div id="~_TabCustomer" class="tab-pane s-TabCustomer">
        <div id="~_CustomerToolbar" class="s-DialogToolbar">
        </div>
        <div class="s-Form">
            <form id="~_CustomerForm" action="">
                <div class="fieldset">
                    <div id="~_CustomerPropertyGrid"></div>
                    <div class="clear"></div>
                </div>
            </form>
        </div>
    </div>
</div>`}};r(b,"OtherFormInTabDialog"),b=i([Br.registerClass("Serenity.Demo.BasicSamples.OtherFormInTabDialog")],b);import{Decorators as $r}from"@serenity-is/corelib";import{OrderGrid as Ar}from"@serenity-is/demo.northwind";var _=class extends Ar{getDialogType(){return b}constructor(e){super(e)}};r(_,"OtherFormInTabGrid"),_=i([$r.registerClass("Serenity.Demo.BasicSamples.OtherFormInTabGrid")],_);import{Decorators as qr,PropertyGrid as Wr,TabsExtensions as Y}from"@serenity-is/corelib";import{first as _r,getForm as Yr,isEmptyOrNull as jr,reloadLookup as zr,validateOptions as Mr}from"@serenity-is/corelib/q";import{OrderDialog as Hr,CustomerForm as Je,CustomerService as Ve,CustomerRow as $e}from"@serenity-is/demo.northwind";var I=class extends Hr{constructor(){super();this.selfChange=0;this.customerPropertyGrid=new Wr(this.byId("CustomerPropertyGrid"),{items:Yr(Je.formKey).filter(t=>t.name!="CustomerID"&&t.name!="NoteList"),idPrefix:this.idPrefix+"_Customer_",useCategories:!0}),this.customerForm=new Je(this.customerPropertyGrid.idPrefix),this.customerValidator=this.byId("CustomerForm").validate(Mr({})),this.form.CustomerID.change(t=>{if(!this.selfChange){var o=this.getCustomerID();if(Y.setDisabled(this.tabs,"Customer",!o),!o){this.customerPropertyGrid.load({});return}Ve.Retrieve({EntityId:o},s=>{this.customerPropertyGrid.load(s.Entity)})}})}getCustomerID(){var t=this.form.CustomerID.value;return jr(t)?null:_r($e.getLookup().items,o=>o.CustomerID==t).ID}loadEntity(t){super.loadEntity(t),Y.setDisabled(this.tabs,"Customer",!this.getCustomerID())}saveCustomer(t,o){var s=this.getCustomerID();if(!s)o(null);else{var m=Y.activeTabKey(this.tabs);if(Y.selectTab(this.tabs,"Customer"),!this.customerValidator.form())return!1;Y.selectTab(this.tabs,m);var n={};this.customerPropertyGrid.save(n),Ve.Update({EntityId:s,Entity:n},k=>{zr($e.lookupKey),this.selfChange++;try{this.form.CustomerID.element.change()}finally{this.selfChange--}o(k)})}return!0}saveOrder(t){super.save(t)}saveAll(t){this.saveCustomer(t,o=>this.saveOrder(t))}save(t){this.saveAll(t)}getTemplate(){return`<div id="~_Toolbar" class="s-DialogToolbar">
</div>
<div id="~_Tabs" class="s-DialogContent">
    <ul>
        <li><a href="#~_TabOrder"><span>Order</span></a></li>
        <li><a href="#~_TabCustomer"><span>Customer</span></a></li>
    </ul>
    <div id="~_TabOrder" class="tab-pane s-TabOrder">
        <div class="s-Form">
            <form id="~_Form" action="">
                <div class="fieldset">
                    <div id="~_PropertyGrid"></div>
                    <div class="clear"></div>
                </div>
            </form>
        </div>
    </div>
    <div id="~_TabCustomer" class="tab-pane s-TabCustomer">
        <div class="s-Form">
            <form id="~_CustomerForm" action="">
                <div class="fieldset">
                    <div id="~_CustomerPropertyGrid"></div>
                    <div class="clear"></div>
                </div>
            </form>
        </div>
    </div>
</div>`}};r(I,"OtherFormOneBarDialog"),I=i([qr.registerClass("Serenity.Demo.BasicSamples.OtherFormOneBarDialog")],I);import{Decorators as Xr}from"@serenity-is/corelib";import{OrderGrid as Zr}from"@serenity-is/demo.northwind";var j=class extends Zr{getDialogType(){return I}constructor(e){super(e)}};r(j,"OtherFormInTabOneBarGrid"),j=i([Xr.registerClass("Serenity.Demo.BasicSamples.OtherFormInTabOneBarGrid")],j);import{Decorators as Gr,EntityDialog as eo}from"@serenity-is/corelib";import{first as to,isEmptyOrNull as ro}from"@serenity-is/corelib/q";import{OrderRow as xe,OrderService as oo,CustomerRow as io,CustomerService as so}from"@serenity-is/demo.northwind";var O=class extends eo{constructor(){super();this.form=new D(this.idPrefix);this.form.CustomerID.changeSelect2(t=>{var o=this.form.CustomerID.value;if(ro(o)){this.setCustomerDetails({});return}var s=to(io.getLookup().items,m=>m.CustomerID==o).ID;so.Retrieve({EntityId:s},m=>{this.setCustomerDetails(m.Entity)})})}getFormKey(){return D.formKey}getIdProperty(){return xe.idProperty}getLocalTextPrefix(){return xe.localTextPrefix}getNameProperty(){return xe.nameProperty}getService(){return oo.baseUrl}setCustomerDetails(t){this.form.CustomerCity.value=t.City,this.form.CustomerContactName.value=t.ContactName,this.form.CustomerContactTitle.value=t.ContactTitle,this.form.CustomerCountry.value=t.Country,this.form.CustomerFax.value=t.Fax,this.form.CustomerPhone.value=t.Phone,this.form.CustomerRegion.value=t.Region}getCssClass(){return super.getCssClass()+" s-OrderDialog s-Demo-Northwind-OrderDialog"}};r(O,"PopulateLinkedDataDialog"),O=i([Gr.registerClass("Serenity.Demo.BasicSamples.PopulateLinkedDataDialog")],O);import{Decorators as ao}from"@serenity-is/corelib";import{OrderGrid as mo}from"@serenity-is/demo.northwind";var z=class extends mo{getDialogType(){return O}constructor(e){super(e)}};r(z,"PopulateLinkedDataGrid"),z=i([ao.registerClass("Serenity.Demo.BasicSamples.PopulateLinkedDataGrid")],z);import{Decorators as no,EditorUtils as po}from"@serenity-is/corelib";import{indexOf as Ae}from"@serenity-is/corelib/q";import{SupplierDialog as co}from"@serenity-is/demo.northwind";var w=class extends co{getToolbarButtons(){let e=super.getToolbarButtons();return e.splice(Ae(e,t=>t.cssClass=="save-and-close-button"),1),e.splice(Ae(e,t=>t.cssClass=="apply-changes-button"),1),e}updateInterface(){super.updateInterface(),po.setReadonly(this.element.find(".editor"),!0),this.element.find("sup").hide(),this.deleteButton.hide()}getEntityTitle(){if(this.isEditMode()){var e=super.getEntitySingular();let t=this.getEntityNameFieldValue()||"";return"View "+e+" ("+t+")"}else return"How did you manage to open this dialog in new record mode?"}updateTitle(){super.updateTitle()}};r(w,"ReadOnlyDialog"),w=i([no.registerClass("Serenity.Demo.BasicSamples.ReadOnlyDialog")],w);import{Decorators as lo}from"@serenity-is/corelib";import{indexOf as uo}from"@serenity-is/corelib/q";import{SupplierGrid as fo}from"@serenity-is/demo.northwind";var M=class extends fo{getDialogType(){return w}constructor(e){super(e)}getButtons(){var e=super.getButtons();return e.splice(uo(e,t=>t.cssClass=="add-button"),1),e}};r(M,"ReadOnlyGrid"),M=i([lo.registerClass("Serenity.Demo.BasicSamples.ReadOnlyGrid")],M);import{Decorators as yo}from"@serenity-is/corelib";import{trimToNull as go}from"@serenity-is/corelib/q";import{CustomerDialog as Co,CustomerService as ho}from"@serenity-is/demo.northwind";var T=class extends Co{constructor(){super(),this.form.CustomerID.element.on("keyup",e=>{e.which>=65&&e.which<=90&&this.getNextNumber()})}afterLoadEntity(){super.afterLoadEntity(),this.isNew()&&this.getNextNumber()}getNextNumber(){var e=go(this.form.CustomerID.value);if(!e||e.length<=1){var t=(e||"C").toUpperCase();ho.GetNextNumber({Prefix:t,Length:5},o=>{this.form.CustomerID.value=o.Serial,this.form.CustomerID.element[0].setSelectionRange(t.length,o.Serial.length)})}}};r(T,"SerialAutoNumberDialog"),T=i([yo.registerClass("Serenity.Demo.BasicSamples.SerialAutoNumberDialog")],T);import{Decorators as vo}from"@serenity-is/corelib";import{CustomerGrid as Do}from"@serenity-is/demo.northwind";var H=class extends Do{getDialogType(){return T}constructor(e){super(e)}};r(H,"SerialAutoNumberGrid"),H=i([vo.registerClass("Serenity.Demo.BasicSamples.SerialAutoNumberGrid")],H);import{Decorators as xo}from"@serenity-is/corelib";import{toId as So}from"@serenity-is/corelib/q";import{OrderDetailRow as Po,ProductRow as Eo}from"@serenity-is/demo.northwind";import{GridEditorDialog as bo}from"@serenity-is/extensions";var X=class extends bo{constructor(){super();this.form=new d(this.idPrefix),this.form.ProductID.changeSelect2(t=>{var o=So(this.form.ProductID.value);o!=null&&(this.form.UnitPrice.value=Eo.getLookup().itemById[o].UnitPrice)}),this.form.Discount.addValidationRule(this.uniqueName,t=>{var o=this.form.UnitPrice.value,s=this.form.Quantity.value,m=this.form.Discount.value;if(o!=null&&s!=null&&m!=null&&m>0&&m>=o*s)return"Discount can't be higher than total price!"})}getFormKey(){return d.formKey}getLocalTextPrefix(){return Po.localTextPrefix}updateInterface(){super.updateInterface(),this.toolbar.findButton("apply-changes-button").hide(),this.toolbar.findButton("save-and-close-button").hide()}};r(X,"ChangingLookupTextDialog"),X=i([xo.registerClass("Serenity.Demo.BasicSamples.ChangingLookupTextDialog")],X);import{Decorators as Io,EntityDialog as Oo}from"@serenity-is/corelib";import{toId as wo}from"@serenity-is/corelib/q";import{OrderRow as Se,OrderService as To}from"@serenity-is/demo.northwind";var B=class extends Oo{constructor(){super();this.form=new g(this.idPrefix),this.form.CategoryID.change(t=>{this.form.DetailList.categoryID=wo(this.form.CategoryID.value)})}getFormKey(){return g.formKey}getIdProperty(){return Se.idProperty}getLocalTextPrefix(){return Se.localTextPrefix}getNameProperty(){return Se.nameProperty}getService(){return To.baseUrl}};r(B,"FilteredLookupInDetailDialog"),B=i([Io.registerClass("Serenity.Demo.BasicSamples.FilteredLookupInDetailDialog")],B);import{Decorators as Bo}from"@serenity-is/corelib";import{OrderGrid as ko}from"@serenity-is/demo.northwind";var Z=class extends ko{getDialogType(){return B}constructor(e){super(e)}};r(Z,"FilteredLookupInDetailGrid"),Z=i([Bo.registerClass("Serenity.Demo.BasicSamples.FilteredLookupInDetailGrid")],Z);import{Decorators as Ro}from"@serenity-is/corelib";import{ProductDialog as Lo}from"@serenity-is/demo.northwind";var p=class extends Lo{getFormKey(){return L.formKey}};r(p,"LookupFilterByMultipleDialog"),p=i([Ro.registerClass("Serenity.Demo.BasicSamples.LookupFilterByMultipleDialog")],p);import{Criteria as No,Decorators as Uo,EntityGrid as Fo}from"@serenity-is/corelib";import{ProductRow as qe,ProductColumns as Ko,ProductService as Qo}from"@serenity-is/demo.northwind";var G=class extends Fo{getColumnsKey(){return Ko.columnsKey}getDialogType(){return p}getIdProperty(){return qe.idProperty}getLocalTextPrefix(){return qe.localTextPrefix}getService(){return Qo.baseUrl}constructor(e){super(e)}onViewSubmit(){if(!super.onViewSubmit())return!1;let e=this.view.params;return e.Criteria=No.and(e.Criteria,[["CategoryName"],"in",[["Produce","Seafood"]]]),!0}};r(G,"LookupFilterByMultipleGrid"),G=i([Uo.registerClass("Serenity.Demo.BasicSamples.LookupFilterByMultipleGrid")],G);import{Decorators as Jo,PropertyDialog as Vo}from"@serenity-is/corelib";import{notifySuccess as $o}from"@serenity-is/corelib/q";var ee=class extends Vo{constructor(){super();this.form=new h(this.idPrefix);this.dialogTitle="Please select some value",this.form.SomeValue.changeSelect2(t=>{$o("You selected item with key: "+this.form.SomeValue.value)})}getFormKey(){return h.formKey}};r(ee,"HardcodedValuesDialog"),ee=i([Jo.registerClass("Serenity.Demo.BasicSamples.HardcodedValuesDialog")],ee);import{Decorators as Ao,PropertyDialog as qo}from"@serenity-is/corelib";var te=class extends qo{constructor(){super();this.form=new x(this.idPrefix);this.dialogTitle="A form with static text blocks"}getFormKey(){return x.formKey}loadInitialEntity(){this.propertyGrid.load({DisplayFieldValue:"This content comes from <b>the value</b> of <em>DisplayFieldValue</em> field."})}getDialogOptions(){var t=super.getDialogOptions();return t.width=650,t}};r(te,"StaticTextBlockDialog"),te=i([Ao.registerClass("Serenity.Demo.BasicSamples.StaticTextBlockDialog")],te);import{Decorators as Wo,LookupEditor as _o}from"@serenity-is/corelib";import{confirm as We,formatDate as Pe,format as _e,notifyInfo as Yo,notifySuccess as Ye,htmlEncode as ye,first as re,count as jo,toId as zo}from"@serenity-is/corelib/q";import{OrderRow as je,OrderGrid as Mo,CustomerRow as Ho,CustomerDialog as Xo,OrderDialog as Ee}from"@serenity-is/demo.northwind";var ge=je.Fields,oe=class extends Mo{constructor(e){super(e)}getColumns(){var e=super.getColumns();return re(e,t=>t.field==ge.CustomerCompanyName).format=t=>`<a href="javascript:;" class="customer-link">${ye(t.value)}</a>`,re(e,t=>t.field==ge.OrderDate).format=t=>`<a href="javascript:;" class="date-link">${Pe(t.value)}</a>`,re(e,t=>t.field==ge.EmployeeFullName).format=t=>`<a href="javascript:;" class="employee-link">${ye(t.value)}</a>`,re(e,t=>t.field==ge.ShipCountry).format=t=>`<a href="javascript:;" class="ship-country-link">${ye(t.value)}</a>`,e}onClick(e,t,o){if(super.onClick(e,t,o),!e.isDefaultPrevented()){var s=this.itemAt(t),m=$(e.target);if(m.hasClass("customer-link")){e.preventDefault();let l=_e("<p>You have clicked an order from customer: {0}.</p><p>If you click Yes, i'll open Customer dialog.</p><p>If you click No, i'll open Order dialog.</p>",ye(s.CustomerCompanyName));We(l,()=>{var rt=re(Ho.getLookup().items,ot=>ot.CustomerID==s.CustomerID);new Xo().loadByIdAndOpenDialog(rt.ID)},{htmlEncode:!1,onNo:()=>{new Ee().loadByIdAndOpenDialog(s.OrderID)}})}else if(m.hasClass("date-link")){e.preventDefault();var n=jo(this.view.getItems(),l=>l.OrderDate==s.OrderDate);Yo("You clicked an order from date "+Pe(s.OrderDate)+". There are "+n+" orders from the same date that is loaded in grid at the moment")}else if(m.hasClass("employee-link"))e.preventDefault(),Ye("You clicked an employee name, so i've opened a new Order Dialog from same customer with that employee prepopulated!"),new Ee().loadEntityAndOpenDialog({CustomerID:s.CustomerID,EmployeeID:s.EmployeeID});else if(m.hasClass("ship-country-link")){e.preventDefault(),Ye("Let's filter the grid to orders from "+s.ShipCountry);var k=this.findQuickFilter(_o,je.Fields.ShipCountry);k.value=s.ShipCountry,this.refresh()}}}editItem(e){if(typeof e=="string"){var t=this.view.getItemById(zo(e)),o=Pe(t.OrderDate);We(_e("You clicked edit link for order with ID: {0} and Date: {1}. Should i open that order?",t.OrderID,o),()=>{new Ee().loadByIdAndOpenDialog(t.OrderID)})}else super.editItem(e)}};r(oe,"CustomLinksInGrid"),oe=i([Wo.registerClass("Serenity.Demo.BasicSamples.CustomLinksInGrid")],oe);import{Decorators as Zo}from"@serenity-is/corelib";import{SupplierRow as ze,SupplierColumns as Go,SupplierDialog as ei,SupplierService as ti}from"@serenity-is/demo.northwind";import{SelectableEntityGrid as ri}from"@serenity-is/extensions";var ie=class extends ri{getColumnsKey(){return Go.columnsKey}getDialogType(){return ei}getIdProperty(){return ze.idProperty}getLocalTextPrefix(){return ze.localTextPrefix}getService(){return ti.baseUrl}};r(ie,"RowSelectionGrid"),ie=i([Zo.registerClass("Serenity.Demo.BasicSamples.RowSelectionGrid")],ie);import{Criteria as oi,Decorators as ii,EntityGrid as si}from"@serenity-is/corelib";import{ProductRow as Me,ProductColumns as ai,ProductDialog as mi,ProductService as ni}from"@serenity-is/demo.northwind";var se=class extends si{getColumnsKey(){return ai.columnsKey}getDialogType(){return mi}getIdProperty(){return Me.idProperty}getLocalTextPrefix(){return Me.localTextPrefix}getService(){return ni.baseUrl}onViewSubmit(){if(!super.onViewSubmit())return!1;var e=this.view.params;return e.Criteria=oi.and(e.Criteria,[["UnitsInStock"],">",10],[["CategoryName"],"!=","Condiments"],[["Discontinued"],"=",0]),!0}};r(se,"GridFilteredByCriteria"),se=i([ii.registerClass("Serenity.Demo.BasicSamples.GridFilteredByCriteria")],se);import{Decorators as pi,EntityGrid as ci}from"@serenity-is/corelib";import{coalesce as He,first as Xe,formatNumber as li}from"@serenity-is/corelib/q";import{ProductRow as Ze,ProductColumns as ui,ProductService as di}from"@serenity-is/demo.northwind";import{Aggregators as Ce}from"@serenity-is/corelib/slick";var ae=class extends ci{getColumnsKey(){return ui.columnsKey}getDialogType(){return p}getIdProperty(){return Ze.idProperty}getLocalTextPrefix(){return Ze.localTextPrefix}getService(){return di.baseUrl}constructor(e){super(e)}createSlickGrid(){var e=super.createSlickGrid();return e.registerPlugin(new Slick.Data.GroupItemMetadataProvider),this.view.setSummaryOptions({aggregators:[new Ce.Avg("UnitPrice"),new Ce.Sum("UnitsInStock"),new Ce.Max("UnitsOnOrder"),new Ce.Avg("ReorderLevel")]}),e}getColumns(){var e=super.getColumns();return Xe(e,t=>t.field==="UnitsOnOrder").groupTotalsFormatter=(t,o)=>t.max?"max: "+He(t.max[o.field],""):"",Xe(e,t=>t.field==="ReorderLevel").groupTotalsFormatter=(t,o)=>t.avg?"avg: "+He(li(t.avg[o.field],"0."),""):"",e}getSlickOptions(){var e=super.getSlickOptions();return e.showFooterRow=!0,e}usePager(){return!1}getButtons(){return[{title:"Group By Category",cssClass:"expand-all-button",onClick:()=>this.view.setGrouping([{getter:"CategoryName"}])},{title:"Group By Category and Supplier",cssClass:"expand-all-button",onClick:()=>this.view.setGrouping([{formatter:e=>"Category: "+e.value+" ("+e.count+" items)",getter:"CategoryName"},{formatter:e=>"Supplier: "+e.value+" ("+e.count+" items)",getter:"SupplierCompanyName"}])},{title:"No Grouping",cssClass:"collapse-all-button",onClick:()=>this.view.setGrouping([])}]}};r(ae,"GroupingAndSummariesInGrid"),ae=i([pi.registerClass("Serenity.Demo.BasicSamples.GroupingAndSummariesInGrid")],ae);import{DateEditor as fi,Decorators as yi,LookupEditor as gi}from"@serenity-is/corelib";import{first as Ge}from"@serenity-is/corelib/q";import{OrderRow as Ci,OrderGrid as hi,OrderShippingState as vi}from"@serenity-is/demo.northwind";var be=Ci.Fields,me=class extends hi{constructor(e){super(e)}getQuickFilters(){let e=super.getQuickFilters();return Ge(e,t=>t.field==be.OrderDate).init=t=>{t.valueAsDate=new Date(2010,4,1);let o=t.element.nextAll(".s-DateEditor").getWidget(fi);o.valueAsDate=new Date(2020,6,1)},Ge(e,t=>t.field==be.ShippingState).init=t=>{t.value=vi.NotShipped.toString()},e}createQuickFilters(){super.createQuickFilters(),this.findQuickFilter(gi,be.ShipVia).values=["1","2"]}};r(me,"InitialValuesForQuickFilters"),me=i([yi.registerClass("Serenity.Demo.BasicSamples.InitialValuesForQuickFilters")],me);import{Decorators as Di}from"@serenity-is/corelib";import{confirm as xi}from"@serenity-is/corelib/q";import{CustomerGrid as Si,CustomerService as Pi,OrderDialog as Ei}from"@serenity-is/demo.northwind";var ne=class extends Si{constructor(e){super(e)}getColumns(){var e=super.getColumns();return e.unshift({field:"Delete Row",name:"",format:t=>'<a class="inline-action delete-row" title="delete"><i class="fa fa-trash-o text-red"></i></a>',width:24,minWidth:24,maxWidth:24}),e.splice(1,0,{field:"View Details",name:"",format:t=>`<a class="inline-action view-details" title="view details">
                    <i class="fa fa-search"></i></a>`,width:24,minWidth:24,maxWidth:24}),e.splice(2,0,{field:"New Order",name:"",format:t=>`<a class="inline-action new-order text-purple" title="new order">
                    <i class="fa fa-cart-plus"></i></a>`,width:24,minWidth:24,maxWidth:24}),e}onClick(e,t,o){if(super.onClick(e,t,o),!e.isDefaultPrevented()){var s=this.itemAt(t),m=$(e.target);if(m.parent().hasClass("inline-action")&&(m=m.parent()),m.hasClass("inline-action")){if(e.preventDefault(),m.hasClass("delete-row"))xi("Delete record?",()=>{Pi.Delete({EntityId:s.ID},k=>{this.refresh()})});else if(m.hasClass("view-details"))this.editItem(s.ID);else if(m.hasClass("new-order")){var n=new Ei;this.initDialog(n),n.loadEntityAndOpenDialog({CustomerID:s.CustomerID})}}}}};r(ne,"InlineActionGrid"),ne=i([Di.registerClass("Serenity.Demo.BasicSamples.InlineActionGrid")],ne);import{Decorators as bi,EntityGrid as Ii}from"@serenity-is/corelib";import{ProductRow as et,ProductDialog as Oi,ProductService as wi}from"@serenity-is/demo.northwind";var pe=class extends Ii{getColumnsKey(){return R.columnsKey}getDialogType(){return Oi}getIdProperty(){return et.idProperty}getLocalTextPrefix(){return et.localTextPrefix}getService(){return wi.baseUrl}constructor(e){super(e)}getSlickOptions(){let e=super.getSlickOptions();return e.rowHeight=150,e}};r(pe,"InlineImageInGrid"),pe=i([bi.registerClass("Serenity.Demo.BasicSamples.InlineImageInGrid")],pe);import{Decorators as Ti}from"@serenity-is/corelib";import{indexOf as Bi}from"@serenity-is/corelib/q";import{SupplierGrid as ki}from"@serenity-is/demo.northwind";var ce=class extends ki{constructor(e){super(e)}getButtons(){var e=super.getButtons();return e.splice(Bi(e,t=>t.cssClass=="add-button"),1),e}};r(ce,"RemovingAddButton"),ce=i([Ti.registerClass("Serenity.Demo.BasicSamples.RemovingAddButton")],ce);import{Decorators as Ri,EntityGrid as Li}from"@serenity-is/corelib";import{SalesByCategoryRow as tt,SalesByCategoryColumns as Ni,SalesByCategoryService as Ui}from"@serenity-is/demo.northwind";var le=class extends Li{constructor(t){super(t);this.nextId=1}getColumnsKey(){return Ni.columnsKey}getIdProperty(){return"__id"}getNameProperty(){return tt.nameProperty}getLocalTextPrefix(){return tt.localTextPrefix}getService(){return Ui.baseUrl}onViewProcessData(t){t=super.onViewProcessData(t);for(var o of t.Entities)o.__id=this.nextId++;return t}getButtons(){return[]}};r(le,"ViewWithoutIDGrid"),le=i([Ri.registerClass("Serenity.Demo.BasicSamples.ViewWithoutIDGrid")],le);import{Decorators as Fi}from"@serenity-is/corelib";import{OrderGrid as Ki}from"@serenity-is/demo.northwind";var ue=class extends Ki{constructor(e){super(e)}};r(ue,"WrappedHeadersGrid"),ue=i([Fi.registerClass("Serenity.Demo.BasicSamples.WrappedHeadersGrid")],ue);export{de as BasicSamplesService,X as ChangingLookupTextDialog,u as ChangingLookupTextEditor,d as ChangingLookupTextForm,S as ChartInDialog,P as CloneableEntityDialog,V as CloneableEntityGrid,oe as CustomLinksInGrid,A as DefaultValuesInNewGrid,Re as DialogBoxes,q as EntityDialogAsPanel,y as FilteredLookupDetailEditor,B as FilteredLookupInDetailDialog,g as FilteredLookupInDetailForm,Z as FilteredLookupInDetailGrid,f as FilteredLookupOrderDetailDialog,E as GetInsertedRecordIdDialog,W as GetInsertedRecordIdGrid,se as GridFilteredByCriteria,ae as GroupingAndSummariesInGrid,ee as HardcodedValuesDialog,C as HardcodedValuesEditor,h as HardcodedValuesForm,me as InitialValuesForQuickFilters,ne as InlineActionGrid,c as InlineImageFormatter,pe as InlineImageInGrid,R as InlineImageInGridColumns,p as LookupFilterByMultipleDialog,L as LookupFilterByMultipleForm,G as LookupFilterByMultipleGrid,b as OtherFormInTabDialog,_ as OtherFormInTabGrid,j as OtherFormInTabOneBarGrid,I as OtherFormOneBarDialog,O as PopulateLinkedDataDialog,D as PopulateLinkedDataForm,z as PopulateLinkedDataGrid,v as ProduceSeafoodCategoryEditor,w as ReadOnlyDialog,M as ReadOnlyGrid,ce as RemovingAddButton,ie as RowSelectionGrid,T as SerialAutoNumberDialog,H as SerialAutoNumberGrid,te as StaticTextBlockDialog,x as StaticTextBlockForm,le as ViewWithoutIDGrid,ue as WrappedHeadersGrid};
//# sourceMappingURL=index.js.map
